/*! For license information please see 6828.3d580365.js.LICENSE.txt */
(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6828],{4055:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var o=e.charAt(n),i=o.charCodeAt(0);if(255!==t[i])throw new TypeError(o+" is ambiguous");t[i]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,o=0;e[r]===a;)n++,r++;for(var i=(e.length-r)*c+1>>>0,u=new Uint8Array(i);e[r];){var f=t[e.charCodeAt(r)];if(255===f)return;for(var l=0,d=i-1;(0!==f||l<o)&&-1!==d;d--,l++)f+=s*u[d]>>>0,u[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");o=l,r++}if(" "!==e[r]){for(var h=i-o;h!==i&&0===u[h];)h++;for(var p=new Uint8Array(n+(i-h)),y=n;h!==i;)p[y++]=u[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,o=0,i=t.length;o!==i&&0===t[o];)o++,r++;for(var c=(i-o)*u+1>>>0,f=new Uint8Array(c);o!==i;){for(var l=t[o],d=0,h=c-1;(0!==l||d<n)&&-1!==h;h--,d++)l+=256*f[h]>>>0,f[h]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,o++}for(var p=c-n;p!==c&&0===f[p];)p++;for(var y=a.repeat(r);p<c;++p)y+=e.charAt(f[p]);return y},decodeUnsafe:f,decode:function(e){var t=f(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}},5191:e=>{"use strict";e.exports=function e(t){if("number"==typeof t&&isNaN(t))throw new Error("NaN is not allowed");if("number"==typeof t&&!isFinite(t))throw new Error("Infinity is not allowed");if(null===t||"object"!=typeof t)return JSON.stringify(t);if(t.toJSON instanceof Function)return e(t.toJSON());if(Array.isArray(t)){return`[${t.reduce(((t,r,n)=>`${t}${0===n?"":","}${e(void 0===r||"symbol"==typeof r?null:r)}`),"")}]`}return`{${Object.keys(t).sort().reduce(((r,n)=>{if(void 0===t[n]||"symbol"==typeof t[n])return r;return`${r}${0===r.length?"":","}${e(n)}:${e(t[n])}`}),"")}}`}},8569:(e,t,r)=>{"use strict";const{encodeText:n}=r(724);e.exports=class{constructor(e,t,r,o){this.name=e,this.code=t,this.codeBuf=n(this.code),this.alphabet=o,this.codec=r(o)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}}},2171:(e,t,r)=>{"use strict";const n=r(4055),o=r(8569),{rfc4648:i}=r(2441),{decodeText:s,encodeText:a}=r(724),c=[["identity","\0",()=>({encode:s,decode:a}),""],["base2","0",i(1),"01"],["base8","7",i(3),"01234567"],["base10","9",n,"0123456789"],["base16","f",i(4),"0123456789abcdef"],["base16upper","F",i(4),"0123456789ABCDEF"],["base32hex","v",i(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",i(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",i(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",i(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",i(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",n,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",n,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",n,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],u=c.reduce(((e,t)=>(e[t[0]]=new o(t[0],t[1],t[2],t[3]),e)),{}),f=c.reduce(((e,t)=>(e[t[1]]=u[t[0]],e)),{});e.exports={names:u,codes:f}},4954:(e,t,r)=>{"use strict";const n=r(2171),{encodeText:o,decodeText:i,concat:s}=r(724);function a(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(t=e.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:n}=a(e);return function(e,t){const r=a(e);r.decode(i(t))}(r,t),s([n,t],n.length+t.length)}).encode=function(e,t){const r=a(e),n=o(r.encode(t));return s([r.codeBuf,n],r.codeBuf.length+n.length)},t.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},t.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(t){return!1}},t.encoding=a,t.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),a(e[0])};const c=Object.freeze(n.names),u=Object.freeze(n.codes);t.names=c,t.codes=u},2441:e=>{"use strict";e.exports={rfc4648:e=>t=>({encode:r=>((e,t,r)=>{const n="="===t[t.length-1],o=(1<<r)-1;let i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,i+=t[o&a>>s];if(s&&(i+=t[o&a<<r-s]),n)for(;i.length*r&7;)i+="=";return i})(r,t,e),decode:r=>((e,t,r)=>{const n={};for(let u=0;u<t.length;++u)n[t[u]]=u;let o=e.length;for(;"="===e[o-1];)--o;const i=new Uint8Array(o*r/8|0);let s=0,a=0,c=0;for(let u=0;u<o;++u){const t=n[e[u]];if(void 0===t)throw new SyntaxError("Invalid character "+e[u]);a=a<<r|t,s+=r,s>=8&&(s-=8,i[c++]=255&a>>s)}if(s>=r||255&a<<8-s)throw new SyntaxError("Unexpected end of data");return i})(r,t,e)})}},724:e=>{"use strict";const t=new TextDecoder,r=new TextEncoder;e.exports={decodeText:e=>t.decode(e),encodeText:e=>r.encode(e),concat:function(e,t){const r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}}},865:e=>{e.exports=function e(n,o){var i,s=0,a=0,c=o=o||0,u=n.length;do{if(c>=u||a>49)throw e.bytes=0,new RangeError("Could not decode varint");i=n[c++],s+=a<28?(i&r)<<a:(i&r)*Math.pow(2,a),a+=7}while(i>=t);return e.bytes=c-o,s};var t=128,r=127},889:e=>{e.exports=function e(o,i,s){if(Number.MAX_SAFE_INTEGER&&o>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");i=i||[];var a=s=s||0;for(;o>=n;)i[s++]=255&o|t,o/=128;for(;o&r;)i[s++]=255&o|t,o>>>=7;return i[s]=0|o,e.bytes=s-a+1,i};var t=128,r=-128,n=Math.pow(2,31)},5823:(e,t,r)=>{e.exports={encode:r(889),decode:r(865),encodingLength:r(2751)}},2751:e=>{var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),o=Math.pow(2,28),i=Math.pow(2,35),s=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<o?4:e<i?5:e<s?6:e<a?7:e<c?8:e<u?9:10}},6828:(e,t,r)=>{"use strict";r.d(t,{F:()=>kf});var n={};r.r(n),r.d(n,{identity:()=>Lr});var o={};r.r(o),r.d(o,{base2:()=>Or});var i={};r.r(i),r.d(i,{base8:()=>Pr});var s={};r.r(s),r.d(s,{base10:()=>_r});var a={};r.r(a),r.d(a,{base16:()=>jr,base16upper:()=>Nr});var c={};r.r(c),r.d(c,{base32:()=>$r,base32hex:()=>Mr,base32hexpad:()=>Kr,base32hexpadupper:()=>zr,base32hexupper:()=>Fr,base32pad:()=>qr,base32padupper:()=>Dr,base32upper:()=>Hr,base32z:()=>Vr});var u={};r.r(u),r.d(u,{base36:()=>Jr,base36upper:()=>Wr});var f={};r.r(f),r.d(f,{base58btc:()=>Gr,base58flickr:()=>Zr});var l={};r.r(l),r.d(l,{base64:()=>Yr,base64pad:()=>Xr,base64url:()=>Qr,base64urlpad:()=>en});var d={};r.r(d),r.d(d,{base256emoji:()=>on});var h={};r.r(h),r.d(h,{sha256:()=>Ln,sha512:()=>On});var p={};r.r(p),r.d(p,{identity:()=>_n});var y={};r.r(y),r.d(y,{code:()=>Nn,decode:()=>Hn,encode:()=>$n,name:()=>jn});var b={};r.r(b),r.d(b,{code:()=>Fn,decode:()=>zn,encode:()=>Kn,name:()=>Mn});var g={};r.r(g),r.d(g,{aK:()=>ri,e8:()=>qo,DO:()=>Ho,dJ:()=>ni,OG:()=>oi,My:()=>Mo,Ph:()=>Wo,lX:()=>Go,Id:()=>Qo,fg:()=>ai,qj:()=>Xo,aT:()=>Jo,r4:()=>ti,aY:()=>$o,x:()=>fi,lq:()=>Zo,z:()=>Yo,zW:()=>Fo,Q5:()=>ui});var w={};r.r(w),r.d(w,{base10:()=>Yc});var m={};r.r(m),r.d(m,{base16:()=>Xc,base16upper:()=>Qc});var x={};r.r(x),r.d(x,{base2:()=>eu});var E={};r.r(E),r.d(E,{base256emoji:()=>ou});var v={};r.r(v),r.d(v,{base32:()=>iu,base32hex:()=>uu,base32hexpad:()=>lu,base32hexpadupper:()=>du,base32hexupper:()=>fu,base32pad:()=>au,base32padupper:()=>cu,base32upper:()=>su,base32z:()=>hu});var A={};r.r(A),r.d(A,{base36:()=>pu,base36upper:()=>yu});var B={};r.r(B),r.d(B,{base58btc:()=>bu,base58flickr:()=>gu});var S={};r.r(S),r.d(S,{base64:()=>wu,base64pad:()=>mu,base64url:()=>xu,base64urlpad:()=>Eu});var k={};r.r(k),r.d(k,{base8:()=>vu});var U={};r.r(U),r.d(U,{identity:()=>Au});var C={};r.r(C),r.d(C,{code:()=>Uu,decode:()=>Ru,encode:()=>Cu,name:()=>ku});var R={};r.r(R),r.d(R,{code:()=>Iu,decode:()=>Ou,encode:()=>Lu,name:()=>Tu});var T={};r.r(T),r.d(T,{identity:()=>nf});var I={};r.r(I),r.d(I,{sha256:()=>cf,sha512:()=>uf});var L=r(6070);var O,P,_,j;function N(e){return{lang:e?.lang??O?.lang,message:e?.message,abortEarly:e?.abortEarly??O?.abortEarly,abortPipeEarly:e?.abortPipeEarly??O?.abortPipeEarly}}function $(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function H(e,t,r,n,o){const i=o&&"input"in o?o.input:r.value,s=o?.expected??e.expects??null,a=o?.received??$(i),c={kind:e.kind,type:e.type,input:i,expected:s,received:a,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},u="schema"===e.kind,f=o?.message??e.message??(l=e.reference,d=c.lang,j?.get(l)?.get(d))??(u?function(e){return _?.get(e)}(c.lang):null)??n.message??function(e){return P?.get(e)}(c.lang);var l,d;f&&(c.message="function"==typeof f?f(c):f),u&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function q(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function D(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}var M=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function F(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function K(e,t){return{kind:"schema",type:"array",reference:K,expects:"Array",async:!1,item:e,message:t,_run(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){const o=r[n],i=this.item._run({typed:!1,value:o},t);if(i.issues){const s={type:"array",origin:"value",input:r,key:n,value:o};for(const t of i.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.push(i.value)}}else H(this,"type",e,t);return e}}}function z(e){return{kind:"schema",type:"boolean",reference:z,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:H(this,"type",e,t),e}}}function V(e,t){return{kind:"schema",type:"literal",reference:V,expects:$(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:H(this,"type",e,t),e}}}function J(e){return{kind:"schema",type:"number",reference:J,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?H(this,"type",e,t):e.typed=!0,e}}}function W(e,t){return{kind:"schema",type:"object",reference:W,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const o=r[n],i=this.entries[n]._run({typed:!1,value:o},t);if(i.issues){const s={type:"object",origin:"value",input:r,key:n,value:o};for(const t of i.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),(void 0!==i.value||n in r)&&(e.value[n]=i.value)}}else H(this,"type",e,t);return e}}}function G(e,...t){const r={kind:"schema",type:"optional",reference:G,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=F(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function Z(e,t){return{kind:"schema",type:"picklist",reference:Z,expects:D(e.map($),"|"),async:!1,options:e,message:t,_run(e,t){return this.options.includes(e.value)?e.typed=!0:H(this,"type",e,t),e}}}function Y(e){return{kind:"schema",type:"string",reference:Y,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:H(this,"type",e,t),e}}}function X(e){let t;if(e)for(const r of e)t?t.push(...r.issues):t=r.issues;return t}function Q(e,t){return{kind:"schema",type:"union",reference:Q,expects:D(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,_run(e,t){let r,n,o;for(const i of this.options){const s=i._run({typed:!1,value:e.value},t);if(s.typed){if(!s.issues){r=s;break}n?n.push(s):n=[s]}else o?o.push(s):o=[s]}if(r)return r;if(n){if(1===n.length)return n[0];H(this,"type",e,t,{issues:X(n)}),e.typed=!0}else{if(1===o?.length)return o[0];H(this,"type",e,t,{issues:X(o)})}return e}}}function ee(e,t,r){return{kind:"schema",type:"variant",reference:ee,expects:"Object",async:!1,key:e,options:t,message:r,_run(e,t){const r=e.value;if(r&&"object"==typeof r){let n,o=0,i=this.key,s=[];const a=(e,c)=>{for(const u of e.options){if("variant"===u.type)a(u,new Set(c).add(u.key));else{let e=!0,a=0;for(const n of c){if(u.entries[n]._run({typed:!1,value:r[n]},t).issues){e=!1,i!==n&&(o<a||o===a&&n in r&&!(i in r))&&(o=a,i=n,s=[]),i===n&&s.push(u.entries[n].expects);break}a++}if(e){const e=u._run({typed:!1,value:r},t);(!n||!n.typed&&e.typed)&&(n=e)}}if(n&&!n.issues)break}};if(a(this,new Set([this.key])),n)return n;H(this,"type",e,t,{input:r[i],expected:D(s,"|"),path:[{type:"object",origin:"value",input:r,key:i,value:r[i]}]})}else H(this,"type",e,t);return e}}}function te(e,t,r){const n=e._run({typed:!1,value:t},N(r));if(n.issues)throw new M(n.issues);return n.value}const re=function e(t,r,n){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:r,message:n,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in r)if(q(r,n)){const o=r[n],i=this.key._run({typed:!1,value:n},t);if(i.issues){const s={type:"object",origin:"key",input:r,key:n,value:o};for(const t of i.issues)t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}const s=this.value._run({typed:!1,value:o},t);if(s.issues){const i={type:"object",origin:"value",input:r,key:n,value:o};for(const t of s.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}i.typed&&s.typed||(e.typed=!1),i.typed&&(e.value[i.value]=s.value)}}else H(this,"type",e,t);return e}}}(Y(),function e(){return{kind:"schema",type:"any",reference:e,expects:"any",async:!1,_run:e=>(e.typed=!0,e)}}()),ne=Q([Y(),J(),z()]),oe=W({label:Y(),value:ne}),ie=ee("type",[W({type:V("options"),options:K(oe),multiple:G(z())}),W({type:V("text"),label:Y(),placeholder:G(Y()),defaultValue:G(Y()),secure:G(z())})]),se=W({type:V("uri/open"),label:Y(),uri:Y()}),ae=V("did/sign"),ce=W({type:ae,label:Y(),payload:G(re),state:G(re)}),ue=W({type:ae,jwt:Y(),state:G(re)}),fe=V("did/submit"),le=W({type:fe,label:Y(),state:G(re)}),de=(ee("type",[ue,W({type:fe,value:Q([ne,K(ne)]),state:G(re)})]),ee("type",[se,ce,le])),he=function e(t,r){return{kind:"schema",type:"loose_object",reference:e,expects:"Object",async:!1,entries:t,message:r,_run(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const o=r[n],i=this.entries[n]._run({typed:!1,value:o},t);if(i.issues){const s={type:"object",origin:"value",input:r,key:n,value:o};for(const t of i.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),(void 0!==i.value||n in r)&&(e.value[n]=i.value)}if(!e.issues||!t.abortEarly)for(const t in r)q(r,t)&&!(t in this.entries)&&(e.value[t]=r[t])}else H(this,"type",e,t);return e}}}({type:Z(["Box","Image","Text"]),props:re}),pe=(Q([z(),J(),Y()]),function(...e){return{...e[0],pipe:e,_run(t,r){for(const n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n._run(t,r))}return t}}}(J(),function e(t,r){return{kind:"validation",type:"min_value",reference:e,async:!1,expects:`>=${t instanceof Date?t.toJSON():$(t)}`,requirement:t,message:r,_run(e,t){return e.typed&&e.value<this.requirement&&H(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():$(e.value)}),e}}}(0))),ye=(Q([pe,Y()]),Q([he,K(he)])),be=Z(["solid","dashed"]),ge=function(e,t){const r={};for(const n in e.entries)r[n]=!t||t.includes(n)?G(e.entries[n]):e.entries[n];return{...e,entries:r}}(W({display:Z(["flex","none"]),overflow:Z(["visible","hidden"]),objectFit:Z(["none","contain","cover"]),opacity:pe,boxShadow:Y(),position:Z(["relative","absolute"]),top:J(),right:J(),bottom:J(),left:J(),width:pe,height:pe,minWidth:pe,minHeight:pe,maxWidth:pe,maxHeight:pe,margin:J(),marginTop:J(),marginRight:J(),marginBottom:J(),marginLeft:J(),padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,flexGrow:pe,flexShrink:pe,flexBasis:pe,flexDirection:Z(["row","row-reverse","column","column-reverse"]),flexWrap:Z(["nowrap","wrap","wrap-reverse"]),alignItems:Z(["flex-start","center","flex-end"]),alignSelf:Z(["auto","flex-start","center","flex-end"]),justifyContent:Z(["flex-start","center","flex-end","space-between","space-around"]),gap:pe,borderStyle:be,borderTopStyle:be,borderRightStyle:be,borderBottomStyle:be,borderLeftStyle:be,borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderColor:Y(),borderTopColor:Y(),borderRightColor:Y(),borderBottomColor:Y(),borderLeftColor:Y(),borderRadius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomLeftRadius:pe,borderBottomRightRadius:pe,backgroundColor:Y(),backgroundImage:Y(),backgroundPosition:Y(),backgroundSize:Y(),backgroundClip:Z(["border-box","text"]),backgroundRepeat:Z(["repeat","repeat-x","repeat-y","no-repeat"])})),we=W({children:G(ye),key:G(Y()),style:G(ge)}),me=(W({type:V("Box"),props:we}),W({actions:G(K(de)),input:G(ie)})),xe=W({title:Y(),description:G(Y())}),Ee=W({...we.entries,...me.entries,...xe.entries}),ve=W({type:V("Tile"),version:V("0.1"),props:Ee});class Ae extends Error{response;request;options;constructor(e,t,r){const n=`${e.status||0===e.status?e.status:""} ${e.statusText||""}`.trim();super(`Request failed with ${n?`status code ${n}`:"an unknown error"}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=r}}class Be extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}const Se=e=>null!==e&&"object"==typeof e,ke=(...e)=>{for(const t of e)if((!Se(t)||Array.isArray(t))&&void 0!==t)throw new TypeError("The `options` argument must be an object");return Te({},...e)},Ue=(e={},t={})=>{const r=new globalThis.Headers(e),n=t instanceof globalThis.Headers,o=new globalThis.Headers(t);for(const[i,s]of o.entries())n&&"undefined"===s||void 0===s?r.delete(i):r.set(i,s);return r};function Ce(e,t,r){return Object.hasOwn(t,r)&&void 0===t[r]?[]:Te(e[r]??[],t[r]??[])}const Re=(e={},t={})=>({beforeRequest:Ce(e,t,"beforeRequest"),beforeRetry:Ce(e,t,"beforeRetry"),afterResponse:Ce(e,t,"afterResponse"),beforeError:Ce(e,t,"beforeError")}),Te=(...e)=>{let t={},r={},n={};for(const o of e)if(Array.isArray(o))Array.isArray(t)||(t=[]),t=[...t,...o];else if(Se(o)){for(let[e,r]of Object.entries(o))Se(r)&&e in t&&(r=Te(t[e],r)),t={...t,[e]:r};Se(o.hooks)&&(n=Re(n,o.hooks),t.hooks=n),Se(o.headers)&&(r=Ue(r,o.headers),t.headers=r)}return t},Ie=(()=>{let e=!1,t=!1;const r="function"==typeof globalThis.ReadableStream,n="function"==typeof globalThis.Request;if(r&&n)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(o){if(o instanceof Error&&"unsupported BodyInit type"===o.message)return!1;throw o}return e&&!t})(),Le="function"==typeof globalThis.AbortController,Oe="function"==typeof globalThis.ReadableStream,Pe="function"==typeof globalThis.FormData,_e=["get","post","put","patch","head","delete"],je={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},Ne=2147483647,$e=Symbol("stop"),He={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},qe={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},De=e=>_e.includes(e)?e.toUpperCase():e,Me={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},Fe=(e={})=>{if("number"==typeof e)return{...Me,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Me,...e}};class Ke{static create(e,t){const r=new Ke(e,t),n=async()=>{if("number"==typeof r._options.timeout&&r._options.timeout>Ne)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let e=await r._fetch();for(const t of r._options.hooks.afterResponse){const n=await t(r.request,r._options,r._decorateResponse(e.clone()));n instanceof globalThis.Response&&(e=n)}if(r._decorateResponse(e),!e.ok&&r._options.throwHttpErrors){let t=new Ae(e,r.request,r._options);for(const e of r._options.hooks.beforeError)t=await e(t);throw t}if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!Oe)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(e.clone(),r._options.onDownloadProgress)}return e},o=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(n):n();for(const[i,s]of Object.entries(je))o[i]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||s);const e=(await o).clone();if("json"===i){if(204===e.status)return"";if(0===(await e.clone().arrayBuffer()).byteLength)return"";if(t.parseJson)return t.parseJson(await e.text())}return e[i]()};return o}request;abortController;_retryCount=0;_input;_options;constructor(e,t={}){if(this._input=e,this._options={...t,headers:Ue(this._input.headers,t.headers),hooks:Re({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:De(t.method??this._input.method),prefixUrl:String(t.prefixUrl||""),retry:Fe(t.retry),throwHttpErrors:!1!==t.throwHttpErrors,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Le){this.abortController=new globalThis.AbortController;const e=this._options.signal??this._input.signal;e?.addEventListener("abort",(()=>{this.abortController.abort(e.reason)})),this._options.signal=this.abortController.signal}if(Ie&&(this._options.duplex="half"),void 0!==this._options.json&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const e="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,e);!(Pe&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(t,{...this.request}),this._options)}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof Be)throw e;if(e instanceof Ae){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;const t=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=1e3*Number(t);Number.isNaN(e)?e=Date.parse(t)-Date.now():e>=Date.parse("2024-01-01")&&(e-=Date.now());const r=this._options.retry.maxRetryAfter??e;return e<r?e:r}if(413===e.response.status)throw e}const t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){const r=Math.min(this._calculateRetryDelay(t),Ne);if(this._retryCount<1)throw t;await async function(e,{signal:t}){return new Promise(((r,n)=>{function o(){clearTimeout(i),n(t.reason)}t&&(t.throwIfAborted(),t.addEventListener("abort",o,{once:!0}));const i=setTimeout((()=>{t?.removeEventListener("abort",o),r()}),e)}))}(r,{signal:this._options.signal});for(const e of this._options.hooks.beforeRetry){if(await e({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===$e)return}return this._retry(e)}}async _fetch(){for(const r of this._options.hooks.beforeRequest){const e=await r(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}const e=((e,t)=>{const r={};for(const n in t)n in qe||n in He||n in e||(r[n]=t[n]);return r})(this.request,this._options),t=this.request;return this.request=t.clone(),!1===this._options.timeout?this._options.fetch(t,e):async function(e,t,r,n){return new Promise(((o,i)=>{const s=setTimeout((()=>{r&&r.abort(),i(new Be(e))}),n.timeout);n.fetch(e,t).then(o).catch(i).then((()=>{clearTimeout(s)}))}))}(t,e,this.abortController,this._options)}_stream(e,t){const r=Number(e.headers.get("content-length"))||0;let n=0;return 204===e.status?(t&&t({percent:1,totalBytes:r,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const i=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await async function e(){const{done:s,value:a}=await i.read();if(s)o.close();else{if(t){n+=a.byteLength;t({percent:0===r?0:n/r,transferredBytes:n,totalBytes:r},a)}o.enqueue(a),await e()}}()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}const ze=e=>{const t=(t,r)=>Ke.create(t,ke(e,r));for(const r of _e)t[r]=(t,n)=>Ke.create(t,ke(e,n,{method:r}));return t.create=e=>ze(ke(e)),t.extend=t=>("function"==typeof t&&(t=t(e??{})),ze(ke(e,t))),t.stop=$e,t},Ve=ze(),Je=new Error("No signer provided to the tile"),We={get id(){throw Je},createToken:()=>Promise.reject(Je)};async function Ge(e,t){const r=await Ve(e,t).json();return te(ve,r)}async function Ze(e){const t=await e.signer,r=await t.createToken({action:e.action}),n=e.options??{},o=await Ve.post(e.url,{...n,json:{jwt:r}}).json();return te(ve,o)}var Ye=r(758),Xe=r(1143);const Qe=()=>{},et=Qe(),tt=Object,rt=e=>e===et,nt=e=>"function"==typeof e,ot=(e,t)=>({...e,...t}),it=new WeakMap;let st=0;const at=e=>{const t=typeof e,r=e&&e.constructor,n=r==Date;let o,i;if(tt(e)!==e||n||r==RegExp)o=n?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=it.get(e),o)return o;if(o=++st+"~",it.set(e,o),r==Array){for(o="@",i=0;i<e.length;i++)o+=at(e[i])+",";it.set(e,o)}if(r==tt){o="#";const t=tt.keys(e).sort();for(;!rt(i=t.pop());)rt(e[i])||(o+=i+":"+at(e[i])+",");it.set(e,o)}}return o},ct=new WeakMap,ut={},ft={},lt="undefined",dt=typeof window!=lt,ht=typeof document!=lt,pt=(e,t)=>{const r=ct.get(e);return[()=>!rt(t)&&e.get(t)||ut,n=>{if(!rt(t)){const o=e.get(t);t in ft||(ft[t]=o),r[5](t,ot(o,n),o||ut)}},r[6],()=>!rt(t)&&t in ft?ft[t]:!rt(t)&&e.get(t)||ut]};let yt=!0;const[bt,gt]=dt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Qe,Qe],wt={isOnline:()=>yt,isVisible:()=>{const e=ht&&document.visibilityState;return rt(e)||"hidden"!==e}},mt={initFocus:e=>(ht&&document.addEventListener("visibilitychange",e),bt("focus",e),()=>{ht&&document.removeEventListener("visibilitychange",e),gt("focus",e)}),initReconnect:e=>{const t=()=>{yt=!0,e()},r=()=>{yt=!1};return bt("online",t),bt("offline",r),()=>{gt("online",t),gt("offline",r)}}},xt=!Ye.useId,Et=!dt||"Deno"in window,vt=e=>dt&&typeof window.requestAnimationFrame!=lt?window.requestAnimationFrame(e):setTimeout(e,1),At=Et?Ye.useEffect:Ye.useLayoutEffect,Bt="undefined"!=typeof navigator&&navigator.connection,St=!Et&&Bt&&(["slow-2g","2g"].includes(Bt.effectiveType)||Bt.saveData),kt=e=>{if(nt(e))try{e=e()}catch(r){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?at(e):"",t]};let Ut=0;const Ct=()=>++Ut;var Rt=3,Tt=0,It=2,Lt=1;async function Ot(...e){const[t,r,n,o]=e,i=ot({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{});let s=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const u=i.throwOnError;if(nt(r)){const e=r,n=[],o=t.keys();for(const r of o)!/^\$(inf|sub)\$/.test(r)&&e(t.get(r)._k)&&n.push(r);return Promise.all(n.map(f))}return f(r);async function f(r){const[o]=kt(r);if(!o)return;const[f,l]=pt(t,o),[d,h,p,y]=ct.get(t),b=()=>{const e=d[o];return(nt(i.revalidate)?i.revalidate(f().data,r):!1!==i.revalidate)&&(delete p[o],delete y[o],e&&e[0])?e[0](2).then((()=>f().data)):f().data};if(e.length<3)return b();let g,w=n;const m=Ct();h[o]=[m,0];const x=!rt(c),E=f(),v=E.data,A=E._c,B=rt(A)?v:A;if(x&&(c=nt(c)?c(B,v):c,l({data:c,_c:B})),nt(w))try{w=w(B)}catch(S){g=S}if(w&&nt(w.then)){if(w=await w.catch((e=>{g=e})),m!==h[o][0]){if(g)throw g;return w}g&&x&&(e=>"function"==typeof a?a(e):!1!==a)(g)&&(s=!0,l({data:B,_c:et}))}if(s&&!g)if(nt(s)){const e=s(w,B);l({data:e,error:et,_c:et})}else l({data:w,error:et,_c:et});if(h[o][1]=Ct(),Promise.resolve(b()).then((()=>{l({_c:et})})),!g)return w;if(u)throw g}}const Pt=(e,t)=>{for(const r in e)e[r][0]&&e[r][0](t)},_t=(e,t)=>{if(!ct.has(e)){const r=ot(mt,t),n={},o=Ot.bind(et,e);let i=Qe;const s={},a=(e,t)=>{const r=s[e]||[];return s[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},c=(t,r,n)=>{e.set(t,r);const o=s[t];if(o)for(const e of o)e(r,n)},u=()=>{if(!ct.has(e)&&(ct.set(e,[n,{},{},{},o,c,a]),!Et)){const t=r.initFocus(setTimeout.bind(et,Pt.bind(et,n,0))),o=r.initReconnect(setTimeout.bind(et,Pt.bind(et,n,1)));i=()=>{t&&t(),o&&o(),ct.delete(e)}}};return u(),[e,o,u,i]}return[e,ct.get(e)[4]]},[jt,Nt]=_t(new Map),$t=ot({onLoadingSlow:Qe,onSuccess:Qe,onError:Qe,onErrorRetry:(e,t,r,n,o)=>{const i=r.errorRetryCount,s=o.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*r.errorRetryInterval;!rt(i)&&s>i||setTimeout(n,a,o)},onDiscarded:Qe,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:St?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:St?5e3:3e3,compare:(e,t)=>at(e)==at(t),isPaused:()=>!1,cache:jt,mutate:Nt,fallback:{}},wt),Ht=(e,t)=>{const r=ot(e,t);if(t){const{use:n,fallback:o}=e,{use:i,fallback:s}=t;n&&i&&(r.use=n.concat(i)),o&&s&&(r.fallback=ot(o,s))}return r},qt=(0,Ye.createContext)({}),Dt=e=>{const{value:t}=e,r=(0,Ye.useContext)(qt),n=nt(t),o=(0,Ye.useMemo)((()=>n?t(r):t),[n,r,t]),i=(0,Ye.useMemo)((()=>n?o:Ht(r,o)),[n,r,o]),s=o&&o.provider,a=(0,Ye.useRef)(et);s&&!a.current&&(a.current=_t(s(i.cache||jt),o));const c=a.current;return c&&(i.cache=c[0],i.mutate=c[1]),At((()=>{if(c)return c[2]&&c[2](),c[3]}),[]),(0,Ye.createElement)(qt.Provider,ot(e,{value:i}))},Mt=dt&&window.__SWR_DEVTOOLS_USE__,Ft=Mt?window.__SWR_DEVTOOLS_USE__:[],Kt=e=>nt(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],zt=()=>ot($t,(0,Ye.useContext)(qt)),Vt=Ft.concat((e=>(t,r,n)=>e(t,r&&((...e)=>{const[n]=kt(t),[,,,o]=ct.get(jt);if(n.startsWith("$inf$"))return r(...e);const i=o[n];return rt(i)?r(...e):(delete o[n],i)}),n))),Jt=e=>function(...t){const r=zt(),[n,o,i]=Kt(t),s=Ht(r,i);let a=e;const{use:c}=s,u=(c||[]).concat(Vt);for(let e=u.length;e--;)a=u[e](a);return a(n,o||s.fetcher||null,s)},Wt=(e,t,r)=>{const n=t[e]||(t[e]=[]);return n.push(r),()=>{const e=n.indexOf(r);e>=0&&(n[e]=n[n.length-1],n.pop())}};Mt&&(window.__SWR_DEVTOOLS_REACT__=Ye);const Gt=Ye.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),Zt={dedupe:!0},Yt=(tt.defineProperty(Dt,"defaultValue",{value:$t}),Jt(((e,t,r)=>{const{cache:n,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:f,refreshWhenOffline:l,keepPreviousData:d}=r,[h,p,y,b]=ct.get(n),[g,w]=kt(e),m=(0,Ye.useRef)(!1),x=(0,Ye.useRef)(!1),E=(0,Ye.useRef)(g),v=(0,Ye.useRef)(t),A=(0,Ye.useRef)(r),B=()=>A.current,S=()=>B().isVisible()&&B().isOnline(),[k,U,C,R]=pt(n,g),T=(0,Ye.useRef)({}).current,I=rt(s)?r.fallback[g]:s,L=(e,t)=>{for(const r in T){const n=r;if("data"===n){if(!o(e[n],t[n])){if(!rt(e[n]))return!1;if(!o(D,t[n]))return!1}}else if(t[n]!==e[n])return!1}return!0},O=(0,Ye.useMemo)((()=>{const e=!!g&&!!t&&(rt(a)?!B().isPaused()&&!i&&(!!rt(c)||c):a),r=t=>{const r=ot(t);return delete r._k,e?{isValidating:!0,isLoading:!0,...r}:r},n=k(),o=R(),s=r(n),u=n===o?s:r(o);let f=s;return[()=>{const e=r(k());return L(e,f)?(f.data=e.data,f.isLoading=e.isLoading,f.isValidating=e.isValidating,f.error=e.error,f):(f=e,e)},()=>u]}),[n,g]),P=(0,Xe.useSyncExternalStore)((0,Ye.useCallback)((e=>C(g,((t,r)=>{L(r,t)||e()}))),[n,g]),O[0],O[1]),_=!m.current,j=h[g]&&h[g].length>0,N=P.data,$=rt(N)?I:N,H=P.error,q=(0,Ye.useRef)($),D=d?rt(N)?q.current:N:$,M=!(j&&!rt(H))&&(_&&!rt(a)?a:!B().isPaused()&&(i?!rt($)&&c:rt($)||c)),F=!!(g&&t&&_&&M),K=rt(P.isValidating)?F:P.isValidating,z=rt(P.isLoading)?F:P.isLoading,V=(0,Ye.useCallback)((async e=>{const t=v.current;if(!g||!t||x.current||B().isPaused())return!1;let n,i,s=!0;const a=e||{},c=!y[g]||!a.dedupe,u=()=>xt?!x.current&&g===E.current&&m.current:g===E.current,f={isValidating:!1,isLoading:!1},l=()=>{U(f)},d=()=>{const e=y[g];e&&e[1]===i&&delete y[g]},b={isValidating:!0};rt(k().data)&&(b.isLoading=!0);try{if(c&&(U(b),r.loadingTimeout&&rt(k().data)&&setTimeout((()=>{s&&u()&&B().onLoadingSlow(g,r)}),r.loadingTimeout),y[g]=[t(w),Ct()]),[n,i]=y[g],n=await n,c&&setTimeout(d,r.dedupingInterval),!y[g]||y[g][1]!==i)return c&&u()&&B().onDiscarded(g),!1;f.error=et;const e=p[g];if(!rt(e)&&(i<=e[0]||i<=e[1]||0===e[1]))return l(),c&&u()&&B().onDiscarded(g),!1;const a=k().data;f.data=o(a,n)?a:n,c&&u()&&B().onSuccess(n,g,r)}catch(A){d();const e=B(),{shouldRetryOnError:t}=e;e.isPaused()||(f.error=A,c&&u()&&(e.onError(A,g,e),(!0===t||nt(t)&&t(A))&&(B().revalidateOnFocus&&B().revalidateOnReconnect&&!S()||e.onErrorRetry(A,g,e,(e=>{const t=h[g];t&&t[0]&&t[0](Rt,e)}),{retryCount:(a.retryCount||0)+1,dedupe:!0}))))}return s=!1,l(),!0}),[g,n]),J=(0,Ye.useCallback)(((...e)=>Ot(n,E.current,...e)),[]);if(At((()=>{v.current=t,A.current=r,rt(N)||(q.current=N)})),At((()=>{if(!g)return;const e=V.bind(et,Zt);let t=0;const r=Wt(g,h,((r,n={})=>{if(r==Tt){const r=Date.now();B().revalidateOnFocus&&r>t&&S()&&(t=r+B().focusThrottleInterval,e())}else if(r==Lt)B().revalidateOnReconnect&&S()&&e();else{if(r==It)return V();if(r==Rt)return V(n)}}));return x.current=!1,E.current=g,m.current=!0,U({_k:w}),M&&(rt($)||Et?e():vt(e)),()=>{x.current=!0,r()}}),[g]),At((()=>{let e;function t(){const t=nt(u)?u(k().data):u;t&&-1!==e&&(e=setTimeout(r,t))}function r(){k().error||!f&&!B().isVisible()||!l&&!B().isOnline()?t():V(Zt).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[u,f,l,g]),(0,Ye.useDebugValue)(D),i&&rt($)&&g){if(!xt&&Et)throw new Error("Fallback data is required when using suspense in SSR.");v.current=t,A.current=r,x.current=!1;const e=b[g];if(!rt(e)){const t=J(e);Gt(t)}if(!rt(H))throw H;{const e=V(Zt);rt(D)||(e.status="fulfilled",e.value=!0),Gt(e)}}return{mutate:J,get data(){return T.data=!0,D},get error(){return T.error=!0,H},get isValidating(){return T.isValidating=!0,K},get isLoading(){return T.isLoading=!0,z}}}))),Xt=Ye.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),Qt={dedupe:!0};tt.defineProperty(Dt,"defaultValue",{value:$t});const er=Jt(((e,t,r)=>{const{cache:n,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:f,refreshWhenOffline:l,keepPreviousData:d}=r,[h,p,y,b]=ct.get(n),[g,w]=kt(e),m=(0,Ye.useRef)(!1),x=(0,Ye.useRef)(!1),E=(0,Ye.useRef)(g),v=(0,Ye.useRef)(t),A=(0,Ye.useRef)(r),B=()=>A.current,S=()=>B().isVisible()&&B().isOnline(),[k,U,C,R]=pt(n,g),T=(0,Ye.useRef)({}).current,I=rt(s)?r.fallback[g]:s,L=(e,t)=>{for(const r in T){const n=r;if("data"===n){if(!o(e[n],t[n])){if(!rt(e[n]))return!1;if(!o(D,t[n]))return!1}}else if(t[n]!==e[n])return!1}return!0},O=(0,Ye.useMemo)((()=>{const e=!!g&&!!t&&(rt(a)?!B().isPaused()&&!i&&(!!rt(c)||c):a),r=t=>{const r=ot(t);return delete r._k,e?{isValidating:!0,isLoading:!0,...r}:r},n=k(),o=R(),s=r(n),u=n===o?s:r(o);let f=s;return[()=>{const e=r(k());return L(e,f)?(f.data=e.data,f.isLoading=e.isLoading,f.isValidating=e.isValidating,f.error=e.error,f):(f=e,e)},()=>u]}),[n,g]),P=(0,Xe.useSyncExternalStore)((0,Ye.useCallback)((e=>C(g,((t,r)=>{L(r,t)||e()}))),[n,g]),O[0],O[1]),_=!m.current,j=h[g]&&h[g].length>0,N=P.data,$=rt(N)?I:N,H=P.error,q=(0,Ye.useRef)($),D=d?rt(N)?q.current:N:$,M=!(j&&!rt(H))&&(_&&!rt(a)?a:!B().isPaused()&&(i?!rt($)&&c:rt($)||c)),F=!!(g&&t&&_&&M),K=rt(P.isValidating)?F:P.isValidating,z=rt(P.isLoading)?F:P.isLoading,V=(0,Ye.useCallback)((async e=>{const t=v.current;if(!g||!t||x.current||B().isPaused())return!1;let n,i,s=!0;const a=e||{},c=!y[g]||!a.dedupe,u=()=>xt?!x.current&&g===E.current&&m.current:g===E.current,f={isValidating:!1,isLoading:!1},l=()=>{U(f)},d=()=>{const e=y[g];e&&e[1]===i&&delete y[g]},b={isValidating:!0};rt(k().data)&&(b.isLoading=!0);try{if(c&&(U(b),r.loadingTimeout&&rt(k().data)&&setTimeout((()=>{s&&u()&&B().onLoadingSlow(g,r)}),r.loadingTimeout),y[g]=[t(w),Ct()]),[n,i]=y[g],n=await n,c&&setTimeout(d,r.dedupingInterval),!y[g]||y[g][1]!==i)return c&&u()&&B().onDiscarded(g),!1;f.error=et;const e=p[g];if(!rt(e)&&(i<=e[0]||i<=e[1]||0===e[1]))return l(),c&&u()&&B().onDiscarded(g),!1;const a=k().data;f.data=o(a,n)?a:n,c&&u()&&B().onSuccess(n,g,r)}catch(A){d();const e=B(),{shouldRetryOnError:t}=e;e.isPaused()||(f.error=A,c&&u()&&(e.onError(A,g,e),(!0===t||nt(t)&&t(A))&&(B().revalidateOnFocus&&B().revalidateOnReconnect&&!S()||e.onErrorRetry(A,g,e,(e=>{const t=h[g];t&&t[0]&&t[0](Rt,e)}),{retryCount:(a.retryCount||0)+1,dedupe:!0}))))}return s=!1,l(),!0}),[g,n]),J=(0,Ye.useCallback)(((...e)=>Ot(n,E.current,...e)),[]);if(At((()=>{v.current=t,A.current=r,rt(N)||(q.current=N)})),At((()=>{if(!g)return;const e=V.bind(et,Qt);let t=0;const r=Wt(g,h,((r,n={})=>{if(r==Tt){const r=Date.now();B().revalidateOnFocus&&r>t&&S()&&(t=r+B().focusThrottleInterval,e())}else if(r==Lt)B().revalidateOnReconnect&&S()&&e();else{if(r==It)return V();if(r==Rt)return V(n)}}));return x.current=!1,E.current=g,m.current=!0,U({_k:w}),M&&(rt($)||Et?e():vt(e)),()=>{x.current=!0,r()}}),[g]),At((()=>{let e;function t(){const t=nt(u)?u(k().data):u;t&&-1!==e&&(e=setTimeout(r,t))}function r(){k().error||!f&&!B().isVisible()||!l&&!B().isOnline()?t():V(Qt).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[u,f,l,g]),(0,Ye.useDebugValue)(D),i&&rt($)&&g){if(!xt&&Et)throw new Error("Fallback data is required when using suspense in SSR.");v.current=t,A.current=r,x.current=!1;const e=b[g];if(!rt(e)){const t=J(e);Xt(t)}if(!rt(H))throw H;{const e=V(Qt);rt(D)||(e.status="fulfilled",e.value=!0),Xt(e)}}return{mutate:J,get data(){return T.data=!0,D},get error(){return T.error=!0,H},get isValidating(){return T.isValidating=!0,K},get isLoading(){return T.isLoading=!0,z}}})),tr=xt?e=>{e()}:Ye.startTransition,rr=((e,t)=>(...r)=>{const[n,o,i]=Kt(r),s=(i.use||[]).concat(t);return e(n,o,{...i,use:s})})(er,(()=>(e,t,r={})=>{const{mutate:n}=zt(),o=(0,Ye.useRef)(e),i=(0,Ye.useRef)(t),s=(0,Ye.useRef)(r),a=(0,Ye.useRef)(0),[c,u,f]=(e=>{const[,t]=(0,Ye.useState)({}),r=(0,Ye.useRef)(!1),n=(0,Ye.useRef)(e),o=(0,Ye.useRef)({data:!1,error:!1,isValidating:!1}),i=(0,Ye.useCallback)((e=>{let i=!1;const s=n.current;for(const t in e){const r=t;s[r]!==e[r]&&(s[r]=e[r],o.current[r]&&(i=!0))}i&&!r.current&&t({})}),[]);return At((()=>(r.current=!1,()=>{r.current=!0}))),[n,o.current,i]})({data:et,error:et,isMutating:!1}),l=c.current,d=(0,Ye.useCallback)((async(e,t)=>{const[r,c]=kt(o.current);if(!i.current)throw new Error("Can\u2019t trigger the mutation: missing fetcher.");if(!r)throw new Error("Can\u2019t trigger the mutation: missing key.");const u=ot(ot({populateCache:!1,throwOnError:!0},s.current),t),l=Ct();a.current=l,f({isMutating:!0});try{const t=await n(r,i.current(c,{arg:e}),ot(u,{throwOnError:!0}));return a.current<=l&&(tr((()=>f({data:t,isMutating:!1,error:void 0}))),null==u.onSuccess||u.onSuccess.call(u,t,r,u)),t}catch(d){if(a.current<=l&&(tr((()=>f({error:d,isMutating:!1}))),null==u.onError||u.onError.call(u,d,r,u),u.throwOnError))throw d}}),[]),h=(0,Ye.useCallback)((()=>{a.current=Ct(),f({data:et,error:et,isMutating:!1})}),[]);return At((()=>{o.current=e,i.current=t,s.current=r})),{trigger:d,reset:h,get data(){return u.data=!0,l.data},get error(){return u.error=!0,l.error},get isMutating(){return u.isMutating=!0,l.isMutating}}}));function nr(e){const{loader:t,signer:r,url:n,options:o}=e,i=t?.getTile??Ge,[s,a]=(0,Ye.useState)(0),c=(0,Ye.useCallback)((()=>{a(Date.now())}),[]),{data:u,error:f,isLoading:l}=Yt([n,s],{fetcher:e=>i(e[0],o)}),{error:d,isMutating:h,trigger:p}=rr([n,s],function(e,t){return async function([r],{arg:n}){return await Ze({action:n,signer:e,url:r,options:t})}}(r??t?.signer??We),{populateCache:!0,revalidate:!1,rollbackOnError:!1});return{isLoading:l,isPosting:h,loadError:f,postAction:p,postError:d,retryLoading:c,tile:u}}function or(e){const{handleOpenURI:t,renderer:r,signer:n,onLoadError:o,onPostError:i,onTileChanged:s,onTileLoaded:a,...c}=e,[u,f]=(0,Ye.useState)(null),l=(0,Ye.useRef)(null),d=(0,Ye.useRef)(null),h=(0,Ye.useRef)(null),{isLoading:p,isPosting:y,loadError:b,postAction:g,postError:w,retryLoading:m,tile:x}=nr({signer:n,...c}),E=function(e){const{handleOpenURI:t,postAction:r,signer:n}=e;return(0,Ye.useCallback)((async(e,o)=>{switch(e.type){case"did/sign":{const t=await n,o=await t.createToken(e.payload??{});await r({type:e.type,state:e.state,jwt:o});break}case"did/submit":await r({type:e.type,value:o??"",state:e.state});break;case"uri/open":await t(e.uri)}}),[t,r,n])}({handleOpenURI:t,postAction:g,signer:n});return null!=o&&null!=b&&b!==l.current&&(l.current=b,o(b)),null!=i&&null!=w&&w!==d.current&&(d.current=w,i(w)),null!=x&&x!==h.current&&(null===h.current?a?.(x):s?.(x),h.current=x),(0,Ye.useEffect)((()=>{f(x?r.render({handleAction:E,tile:x}):null)}),[E,r.render,x]),{element:u,isLoading:p,isPosting:y,loadError:b,postError:w,retryLoading:m,tile:x}}function ir(e){const{renderLoadError:t,renderLoading:r,renderPostError:n,renderPosting:o,...i}=e,{element:s,isLoading:a,isPosting:c,loadError:u,postError:f,retryLoading:l,tile:d}=or(i);if(null!=u)return t({error:u,retry:l});if(null!=d){if(null!=f&&null!=n)return n({element:s,error:f,loadedTile:d});if(c&&null!=o)return o({element:s,loadedTile:d})}return null!=s?s:a&&null!=r?r({renderer:e.renderer}):null}function sr(e){window.location.href=e}function ar(e){const t=typeof e;return"boolean"===t||"number"===t||"string"===t}class cr{createElement(e,t){switch(e.type){case"Box":return this.createBox({...e.props,key:t},this.createBoxChildren(e.props.children));case"Image":return this.createImage({...e.props,key:t});case"Text":return this.createText({...e.props,key:t},this.createTextChildren(e.props.children));default:throw new Error(`Unsupported element type: ${e.type}`)}}createBox(e,t){return null}createBoxChildren(e,t){if(null==e)return null;if(ar(e))throw new Error(`Unsupported Box children: ${e}`);return Array.isArray(e)?e.map(((e,t)=>this.createBoxChildren(e,`k${t}`))):this.createElement(e,t)}createImage(e){return null}createText(e,t){return null}createTextChildren(e){if(null==e)return null;if(ar(e))return e;if(Array.isArray(e))return e.map(((e,t)=>this.createTextChildren(e)));throw new Error(`Unsupported Text children: ${e}`)}renderInteractions(e){return null}renderTile(e){const{actions:t,input:r,title:n,...o}=e.tile.props;return this.createBox({style:{flexDirection:"column"}},[this.createBox({key:"tile",...o},e.children),this.renderInteractions({actions:t,input:r,handleAction:e.handleAction})])}render(e){const{handleAction:t,tile:r}=e;return this.renderTile({children:this.createBoxChildren(r.props.children),handleAction:t,tile:r})}}function ur({action:e,disabled:t,onClick:r}){switch(e.type){case"did/sign":return(0,L.jsx)("button",{type:"button",className:"tairu-action tairu-action-sign",disabled:t,onClick:r,children:e.label});case"did/submit":return(0,L.jsx)("button",{type:"submit",className:"tairu-action tairu-action-submit",disabled:t,onClick:r,children:e.label});case"uri/open":return(0,L.jsx)("button",{type:"button",className:"tairu-action tairu-action-open",disabled:t,onClick:r,children:e.label});default:return null}}const fr="tairu-input tairu-input-options";function lr({checked:e,disabled:t,label:r,setChecked:n,type:o}){return(0,L.jsxs)("label",{className:"tairu-option",children:[(0,L.jsx)("input",{name:"input",type:o,checked:e,disabled:t,onChange:()=>n(!e)}),(0,L.jsx)("span",{children:r})]})}const dr=(0,Ye.forwardRef)((function({disabled:e,multiple:t,options:r},n){const[o,i]=(0,Ye.useState)({});if((0,Ye.useImperativeHandle)(n,(()=>r.filter(((e,t)=>!!o[t])).map((e=>e.value))),[o,r]),0===r.length)return null;if(1===r.length)return(0,L.jsx)("div",{className:fr,children:(0,L.jsx)(lr,{type:"checkbox",disabled:e,checked:!!o[0],setChecked:e=>{i((t=>({...t,0:e})))},...r[0]})});if(t){const t=r.map(((t,r)=>(0,L.jsx)(lr,{type:"checkbox",disabled:e,checked:!!o[r],setChecked:e=>{i((t=>({...t,[r]:e})))},...t},`${r}`)));return(0,L.jsx)("div",{className:fr,children:t})}const s=r.map(((t,r)=>(0,L.jsx)(lr,{type:"radio",disabled:e,checked:!!o[r],setChecked:e=>{i({[r]:e})},...t},`${r}`)));return(0,L.jsx)("div",{className:fr,children:s})})),hr=(0,Ye.forwardRef)((function({disabled:e,label:t,defaultValue:r,placeholder:n,secure:o},i){const[s,a]=(0,Ye.useState)(r??"");return(0,Ye.useImperativeHandle)(i,(()=>s),[s]),(0,L.jsx)("div",{className:"tairu-input tairu-input-text",children:(0,L.jsxs)("label",{children:[(0,L.jsx)("span",{children:t}),":\xa0",(0,L.jsx)("input",{name:"input",type:o?"password":"text",disabled:e,onChange:e=>a(e.target.value),placeholder:n,value:s})]})})})),pr=(0,Ye.forwardRef)((function(e,t){switch(e.type){case"options":return(0,L.jsx)(dr,{ref:t,...e});case"text":return(0,L.jsx)(hr,{ref:t,...e});default:return(0,L.jsxs)("div",{children:["Unsupported input type: ",e.type]})}}));function yr(){throw new Error("No action handler provided")}const br=(0,Ye.createContext)(null);br.Provider;function gr({actions:e,input:t,handleAction:r}){const n=(0,Ye.useContext)(br),o=r??n,i=null==o,s=o??yr,a=(0,Ye.useRef)();let c;const u=(e??[]).map(((e,t)=>{"did/submit"===e.type&&(c=e);return(0,L.jsx)(ur,{action:e,disabled:i,onClick:t=>{t.preventDefault(),t.stopPropagation(),s(e,a.current)}},`${t}`)}));return(0,L.jsxs)("form",{className:"tairu-interactions",onSubmit:async e=>{e.preventDefault(),null!=c&&await s(c,a.current)},children:[t?(0,L.jsx)(pr,{ref:a,disabled:i,...t}):null,u.length?(0,L.jsx)("div",{className:"tairu-actions",children:u}):null]})}const wr=new class extends cr{createBox({key:e,...t},r){return(0,L.jsx)("div",{...t,children:r},e)}createImage({key:e,...t}){return(0,L.jsx)("img",{...t},e)}createText({key:e,...t},r){return(0,L.jsx)("span",{...t,children:r},e)}renderInteractions(e){return(0,L.jsx)(gr,{...e})}};function mr(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function xr(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?mr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}var Er=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==r[s])throw new TypeError(i+" is ambiguous");r[s]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,o=0;e[t]===c;)n++,t++;for(var i=(e.length-t)*u+1>>>0,s=new Uint8Array(i);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var l=0,d=i-1;(0!==f||l<o)&&-1!==d;d--,l++)f+=a*s[d]>>>0,s[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");o=l,t++}if(" "!==e[t]){for(var h=i-o;h!==i&&0===s[h];)h++;for(var p=new Uint8Array(n+(i-h)),y=n;h!==i;)p[y++]=s[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,o=0,i=t.length;o!==i&&0===t[o];)o++,r++;for(var s=(i-o)*f+1>>>0,u=new Uint8Array(s);o!==i;){for(var l=t[o],d=0,h=s-1;(0!==l||d<n)&&-1!==h;h--,d++)l+=256*u[h]>>>0,u[h]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,o++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var y=c.repeat(r);p<s;++p)y+=e.charAt(u[p]);return y},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const vr=Er,Ar=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class Br{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Sr{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Ur(this,e)}}class kr{constructor(e){this.decoders=e}or(e){return Ur(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ur=(e,t)=>new kr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Cr{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Br(e,t,r),this.decoder=new Sr(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Rr=({name:e,prefix:t,encode:r,decode:n})=>new Cr(e,t,r,n),Tr=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=vr(r,t);return Rr({prefix:e,name:t,encode:n,decode:e=>Ar(o(e))})},Ir=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Rr({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],o=(1<<r)-1;let i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,i+=t[o&a>>s];if(s&&(i+=t[o&a<<r-s]),n)for(;i.length*r&7;)i+="=";return i})(e,n,r),decode:t=>((e,t,r,n)=>{const o={};for(let f=0;f<t.length;++f)o[t[f]]=f;let i=e.length;for(;"="===e[i-1];)--i;const s=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let f=0;f<i;++f){const t=o[e[f]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)}),Lr=Rr({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Or=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Pr=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),_r=Tr({prefix:"9",name:"base10",alphabet:"0123456789"}),jr=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nr=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),$r=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hr=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qr=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Dr=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mr=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Fr=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Kr=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zr=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Vr=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Jr=Tr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Wr=Tr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Gr=Tr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Zr=Tr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Yr=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Xr=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qr=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),en=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),tn=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),rn=tn.reduce(((e,t,r)=>(e[r]=t,e)),[]),nn=tn.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const on=Rr({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=rn[t]),"")},decode:function(e){const t=[];for(const r of e){const e=nn[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var sn=function e(t,r,n){r=r||[];var o=n=n||0;for(;t>=un;)r[n++]=255&t|an,t/=128;for(;t&cn;)r[n++]=255&t|an,t>>>=7;return r[n]=0|t,e.bytes=n-o+1,r},an=128,cn=-128,un=Math.pow(2,31);var fn=function e(t,r){var n,o=0,i=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],o+=i<28?(n&dn)<<i:(n&dn)*Math.pow(2,i),i+=7}while(n>=ln);return e.bytes=s-r,o},ln=128,dn=127;var hn=Math.pow(2,7),pn=Math.pow(2,14),yn=Math.pow(2,21),bn=Math.pow(2,28),gn=Math.pow(2,35),wn=Math.pow(2,42),mn=Math.pow(2,49),xn=Math.pow(2,56),En=Math.pow(2,63),vn={encode:sn,decode:fn,encodingLength:function(e){return e<hn?1:e<pn?2:e<yn?3:e<bn?4:e<gn?5:e<wn?6:e<mn?7:e<xn?8:e<En?9:10}};const An=vn,Bn=(e,t=0)=>[An.decode(e,t),An.decode.bytes],Sn=(e,t,r=0)=>(An.encode(e,t,r),t),kn=e=>An.encodingLength(e),Un=(e,t)=>{const r=t.byteLength,n=kn(e),o=n+kn(r),i=new Uint8Array(o+r);return Sn(e,i,0),Sn(r,i,n),i.set(t,o),new Cn(e,r,t,i)};class Cn{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Rn=({name:e,code:t,encode:r})=>new Tn(e,t,r);class Tn{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Un(this.code,t):t.then((e=>Un(this.code,e)))}throw Error("Unknown type, must be binary type")}}const In=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Ln=Rn({name:"sha2-256",code:18,encode:In("SHA-256")}),On=Rn({name:"sha2-512",code:19,encode:In("SHA-512")}),Pn=Ar,_n={code:0,name:"identity",encode:Pn,digest:e=>Un(0,Pn(e))},jn="raw",Nn=85,$n=e=>Ar(e),Hn=e=>Ar(e),qn=new TextEncoder,Dn=new TextDecoder,Mn="json",Fn=512,Kn=e=>qn.encode(JSON.stringify(e)),zn=e=>JSON.parse(Dn.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Vn={...n,...o,...i,...s,...a,...c,...u,...f,...l,...d};function Jn(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Wn=Jn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Gn=Jn("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=xr((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Zn={utf8:Wn,"utf-8":Wn,hex:Vn.base16,latin1:Gn,ascii:Gn,binary:Gn,...Vn};function Yn(e,t="utf8"){const r=Zn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):mr(globalThis.Buffer.from(e,"utf-8"))}function Xn(e,t="utf8"){const r=Zn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Qn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function eo(e,...t){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function to(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Qn(e.outputLen),Qn(e.blockLen)}function ro(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function no(e,t){eo(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const oo="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const io=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),so=(e,t)=>e<<32-t|e>>>t,ao=(e,t)=>e<<t|e>>>32-t>>>0,co=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],uo=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function fo(e){for(let t=0;t<e.length;t++)e[t]=uo(e[t])}function lo(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),eo(e),e}class ho{clone(){return this._cloneInto()}}function po(e){const t=t=>e().update(lo(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function yo(e=32){if(oo&&"function"==typeof oo.getRandomValues)return oo.getRandomValues(new Uint8Array(e));if(oo&&"function"==typeof oo.randomBytes)return oo.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const bo=(e,t,r)=>e&t^~e&r,go=(e,t,r)=>e&t^e&r^t&r;class wo extends ho{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=io(this.buffer)}update(e){ro(this);const{view:t,buffer:r,blockLen:n}=this,o=(e=lo(e)).length;for(let i=0;i<o;){const s=Math.min(n-this.pos,o-i);if(s!==n)r.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=io(e);for(;n<=o-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){ro(this),no(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(r,0),i=0);for(let f=i;f<n;f++)t[f]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),a=Number(r&i),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),o),this.process(r,0);const s=io(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)s.setUint32(4*f,u[f],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:o,destroyed:i,pos:s}=this;return e.length=n,e.pos=s,e.finished=o,e.destroyed=i,n%t&&e.buffer.set(r),e}}const mo=BigInt(2**32-1),xo=BigInt(32);function Eo(e,t=!1){return t?{h:Number(e&mo),l:Number(e>>xo&mo)}:{h:0|Number(e>>xo&mo),l:0|Number(e&mo)}}function vo(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=Eo(e[o],t);[r[o],n[o]]=[i,s]}return[r,n]}const Ao=(e,t,r)=>e<<r|t>>>32-r,Bo=(e,t,r)=>t<<r|e>>>32-r,So=(e,t,r)=>t<<r-32|e>>>64-r,ko=(e,t,r)=>e<<r-32|t>>>64-r;const Uo={fromBig:Eo,split:vo,toBig:(e,t)=>BigInt(e>>>0)<<xo|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:Ao,rotlSL:Bo,rotlBH:So,rotlBL:ko,add:function(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:0|o}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,add5H:(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0,add5L:(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0)},Co=Uo,[Ro,To]=(()=>Co.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),Io=new Uint32Array(80),Lo=new Uint32Array(80);class Oo extends wo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:f,Fl:l,Gh:d,Gl:h,Hh:p,Hl:y}=this;return[e,t,r,n,o,i,s,a,c,u,f,l,d,h,p,y]}set(e,t,r,n,o,i,s,a,c,u,f,l,d,h,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|f,this.Fl=0|l,this.Gh=0|d,this.Gl=0|h,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let w=0;w<16;w++,t+=4)Io[w]=e.getUint32(t),Lo[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const e=0|Io[w-15],t=0|Lo[w-15],r=Co.rotrSH(e,t,1)^Co.rotrSH(e,t,8)^Co.shrSH(e,t,7),n=Co.rotrSL(e,t,1)^Co.rotrSL(e,t,8)^Co.shrSL(e,t,7),o=0|Io[w-2],i=0|Lo[w-2],s=Co.rotrSH(o,i,19)^Co.rotrBH(o,i,61)^Co.shrSH(o,i,6),a=Co.rotrSL(o,i,19)^Co.rotrBL(o,i,61)^Co.shrSL(o,i,6),c=Co.add4L(n,a,Lo[w-7],Lo[w-16]),u=Co.add4H(c,r,s,Io[w-7],Io[w-16]);Io[w]=0|u,Lo[w]=0|c}let{Ah:r,Al:n,Bh:o,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:f,El:l,Fh:d,Fl:h,Gh:p,Gl:y,Hh:b,Hl:g}=this;for(let w=0;w<80;w++){const e=Co.rotrSH(f,l,14)^Co.rotrSH(f,l,18)^Co.rotrBH(f,l,41),t=Co.rotrSL(f,l,14)^Co.rotrSL(f,l,18)^Co.rotrBL(f,l,41),m=f&d^~f&p,x=l&h^~l&y,E=Co.add5L(g,t,x,To[w],Lo[w]),v=Co.add5H(E,b,e,m,Ro[w],Io[w]),A=0|E,B=Co.rotrSH(r,n,28)^Co.rotrBH(r,n,34)^Co.rotrBH(r,n,39),S=Co.rotrSL(r,n,28)^Co.rotrBL(r,n,34)^Co.rotrBL(r,n,39),k=r&o^r&s^o&s,U=n&i^n&a^i&a;b=0|p,g=0|y,p=0|d,y=0|h,d=0|f,h=0|l,({h:f,l:l}=Co.add(0|c,0|u,0|v,0|A)),c=0|s,u=0|a,s=0|o,a=0|i,o=0|r,i=0|n;const C=Co.add3L(A,S,U);r=Co.add3H(C,v,B,k),n=0|C}({h:r,l:n}=Co.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:o,l:i}=Co.add(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=Co.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=Co.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:f,l:l}=Co.add(0|this.Eh,0|this.El,0|f,0|l)),({h:d,l:h}=Co.add(0|this.Fh,0|this.Fl,0|d,0|h)),({h:p,l:y}=Co.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:b,l:g}=Co.add(0|this.Hh,0|this.Hl,0|b,0|g)),this.set(r,n,o,i,s,a,c,u,f,l,d,h,p,y,b,g)}roundClean(){Io.fill(0),Lo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Po=po((()=>new Oo)),_o=BigInt(0),jo=BigInt(1),No=BigInt(2);function $o(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Ho(e){if(!$o(e))throw new Error("Uint8Array expected")}function qo(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const Do=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Mo(e){Ho(e);let t="";for(let r=0;r<e.length;r++)t+=Do[e[r]];return t}function Fo(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Ko(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const zo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Vo(e){return e>=zo._0&&e<=zo._9?e-zo._0:e>=zo._A&&e<=zo._F?e-(zo._A-10):e>=zo._a&&e<=zo._f?e-(zo._a-10):void 0}function Jo(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){const t=Vo(e.charCodeAt(i)),r=Vo(e.charCodeAt(i+1));if(void 0===t||void 0===r){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[o]=16*t+r}return n}function Wo(e){return Ko(Mo(e))}function Go(e){return Ho(e),Ko(Mo(Uint8Array.from(e).reverse()))}function Zo(e,t){return Jo(e.toString(16).padStart(2*t,"0"))}function Yo(e,t){return Zo(e,t).reverse()}function Xo(e,t,r){let n;if("string"==typeof t)try{n=Jo(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else{if(!$o(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const o=n.length;if("number"==typeof r&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n}function Qo(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Ho(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const t=e[n];r.set(t,o),o+=t.length}return r}const ei=e=>"bigint"==typeof e&&_o<=e;function ti(e,t,r){return ei(e)&&ei(t)&&ei(r)&&t<=e&&e<r}function ri(e,t,r,n){if(!ti(t,r,n))throw new Error(`expected valid ${e}: ${r} <= n < ${n}, got ${typeof t} ${t}`)}function ni(e){let t;for(t=0;e>_o;e>>=jo,t+=1);return t}const oi=e=>(No<<BigInt(e-1))-jo,ii=e=>new Uint8Array(e),si=e=>Uint8Array.from(e);function ai(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=ii(e),o=ii(e),i=0;const s=()=>{n.fill(1),o.fill(0),i=0},a=(...e)=>r(o,n,...e),c=(e=ii())=>{o=a(si([0]),e),n=a(),0!==e.length&&(o=a(si([1]),e),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return Qo(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}}const ci={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||$o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ui(e,t,r={}){const n=(t,r,n)=>{const o=ci[r];if("function"!=typeof o)throw new Error(`Invalid validator "${r}", expected function`);const i=e[t];if(!(n&&void 0===i||o(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${r}`)};for(const[o,i]of Object.entries(t))n(o,i,!1);for(const[o,i]of Object.entries(r))n(o,i,!0);return e}function fi(e){const t=new WeakMap;return(r,...n)=>{const o=t.get(r);if(void 0!==o)return o;const i=e(r,...n);return t.set(r,i),i}}const li=BigInt(0),di=BigInt(1),hi=BigInt(2),pi=BigInt(3),yi=BigInt(4),bi=BigInt(5),gi=BigInt(8);BigInt(9),BigInt(16);function wi(e,t){const r=e%t;return r>=li?r:t+r}function mi(e,t,r){if(r<=li||t<li)throw new Error("Expected power/modulo > 0");if(r===di)return li;let n=di;for(;t>li;)t&di&&(n=n*e%r),e=e*e%r,t>>=di;return n}function xi(e,t,r){let n=e;for(;t-- >li;)n*=n,n%=r;return n}function Ei(e,t){if(e===li||t<=li)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=wi(e,t),n=t,o=li,i=di,s=di,a=li;for(;r!==li;){const e=n/r,t=n%r,c=o-s*e,u=i-a*e;n=r,r=t,o=s,i=a,s=c,a=u}if(n!==di)throw new Error("invert: does not exist");return wi(o,t)}function vi(e){if(e%yi===pi){const t=(e+di)/yi;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%gi===bi){const t=(e-bi)/gi;return function(e,r){const n=e.mul(r,hi),o=e.pow(n,t),i=e.mul(r,o),s=e.mul(e.mul(i,hi),o),a=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-di)/hi;let r,n,o;for(r=e-di,n=0;r%hi===li;r/=hi,n++);for(o=hi;o<e&&mi(o,t,e)!==e-di;o++);if(1===n){const t=(e+di)/yi;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const i=(r+di)/hi;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,o),r),u=e.pow(s,i),f=e.pow(s,r);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(f);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const r=e.pow(c,di<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),f=e.mul(f,c),a=t}return u}}(e)}const Ai=(e,t)=>(wi(e,t)&di)===di,Bi=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Si(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function ki(e,t,r=!1,n={}){if(e<=li)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=Si(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=vi(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:oi(o),ZERO:li,ONE:di,create:t=>wi(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return li<=t&&t<e},is0:e=>e===li,isOdd:e=>(e&di)===di,neg:t=>wi(-t,e),eql:(e,t)=>e===t,sqr:t=>wi(t*t,e),add:(t,r)=>wi(t+r,e),sub:(t,r)=>wi(t-r,e),mul:(t,r)=>wi(t*r,e),pow:(e,t)=>function(e,t,r){if(r<li)throw new Error("Expected power > 0");if(r===li)return e.ONE;if(r===di)return t;let n=e.ONE,o=t;for(;r>li;)r&di&&(n=e.mul(n,o)),o=e.sqr(o),r>>=di;return n}(a,e,t),div:(t,r)=>wi(t*Ei(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ei(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,o)=>e.is0(n)?t:(r[o]=t,e.mul(t,n))),e.ONE),o=e.inv(n);return t.reduceRight(((t,n,o)=>e.is0(n)?t:(r[o]=e.mul(t,r[o]),e.mul(t,n))),o),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?Yo(e,i):Zo(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return r?Go(e):Wo(e)}});return Object.freeze(a)}function Ui(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ci(e){const t=Ui(e);return t+Math.ceil(t/2)}const Ri=BigInt(0),Ti=BigInt(1),Ii=new WeakMap,Li=new WeakMap;function Oi(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},o=e=>{n(e);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}};return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,o=t;for(;r>Ri;)r&Ti&&(n=n.add(o)),o=o.double(),r>>=Ti;return n},precomputeWindow(e,t){const{windows:r,windowSize:n}=o(t),i=[];let s=e,a=s;for(let o=0;o<r;o++){a=s,i.push(a);for(let e=1;e<n;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(t,n,i){const{windows:s,windowSize:a}=o(t);let c=e.ZERO,u=e.BASE;const f=BigInt(2**t-1),l=2**t,d=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let o=Number(i&f);i>>=d,o>a&&(o-=l,i+=Ti);const s=t,h=t+Math.abs(o)-1,p=e%2!=0,y=o<0;0===o?u=u.add(r(p,n[s])):c=c.add(r(y,n[h]))}return{p:c,f:u}},wNAFCached(e,t,r){const n=Li.get(e)||1;let o=Ii.get(e);return o||(o=this.precomputeWindow(e,n),1!==n&&Ii.set(e,r(o))),this.wNAF(n,o,t)},setWindowSize(e,t){n(t),Li.set(e,t),Ii.delete(e)}}}function Pi(e,t,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach(((e,r)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${r}`)})),r.forEach(((t,r)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${r}`)}));const o=ni(BigInt(r.length)),i=o>12?o-3:o>4?o-2:o?2:1,s=(1<<i)-1,a=new Array(s+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/i)*i;let u=e.ZERO;for(let f=c;f>=0;f-=i){a.fill(e.ZERO);for(let e=0;e<n.length;e++){const t=n[e],o=Number(t>>BigInt(f)&BigInt(s));a[o]=a[o].add(r[e])}let t=e.ZERO;for(let r=a.length-1,n=e.ZERO;r>0;r--)n=n.add(a[r]),t=t.add(n);if(u=u.add(t),0!==f)for(let e=0;e<i;e++)u=u.double()}return u}function _i(e){return function(e){const t=Bi.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});ui(e,t)}(e.Fp),ui(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Si(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const ji=BigInt(0),Ni=BigInt(1),$i=BigInt(2),Hi=BigInt(8),qi={zip215:!0};function Di(e){const t=function(e){const t=_i(e);return ui(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:n,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:c}=t,u=$i<<BigInt(8*a)-Ni,f=r.create,l=ki(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(n){return{isValid:!1,value:ji}}}),h=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(qo("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function y(e,t){ri("coordinate "+e,t,ji,u)}function b(e){if(!(e instanceof m))throw new Error("ExtendedPoint expected")}const g=fi(((e,t)=>{const{ex:n,ey:o,ez:i}=e,s=e.is0();null==t&&(t=s?Hi:r.inv(i));const a=f(n*t),c=f(o*t),u=f(i*t);if(s)return{x:ji,y:Ni};if(u!==Ni)throw new Error("invZ was invalid");return{x:a,y:c}})),w=fi((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:o,ey:i,ez:s,et:a}=e,c=f(o*o),u=f(i*i),l=f(s*s),d=f(l*l),h=f(c*r);if(f(l*f(h+u))!==f(d+f(n*f(c*u))))throw new Error("bad point: equation left != right (1)");if(f(o*i)!==f(s*a))throw new Error("bad point: equation left != right (2)");return!0}));class m{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,y("x",e),y("y",t),y("z",r),y("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof m)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return y("x",t),y("y",r),new m(t,r,Ni,f(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(m.fromAffine)}static msm(e,t){return Pi(m,l,e,t)}_setWindowSize(e){v.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){b(e);const{ex:t,ey:r,ez:n}=this,{ex:o,ey:i,ez:s}=e,a=f(t*s),c=f(o*n),u=f(r*s),l=f(i*n);return a===c&&u===l}is0(){return this.equals(m.ZERO)}negate(){return new m(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:o}=this,i=f(r*r),s=f(n*n),a=f($i*f(o*o)),c=f(e*i),u=r+n,l=f(f(u*u)-i-s),d=c+s,h=d-a,p=c-s,y=f(l*h),b=f(d*p),g=f(l*p),w=f(h*d);return new m(y,b,w,g)}add(e){b(e);const{a:r,d:n}=t,{ex:o,ey:i,ez:s,et:a}=this,{ex:c,ey:u,ez:l,et:d}=e;if(r===BigInt(-1)){const e=f((i-o)*(u+c)),t=f((i+o)*(u-c)),r=f(t-e);if(r===ji)return this.double();const n=f(s*$i*d),h=f(a*$i*l),p=h+n,y=t+e,b=h-n,g=f(p*r),w=f(y*b),x=f(p*b),E=f(r*y);return new m(g,w,E,x)}const h=f(o*c),p=f(i*u),y=f(a*n*d),g=f(s*l),w=f((o+i)*(c+u)-h-p),x=g-y,E=g+y,v=f(p-r*h),A=f(w*x),B=f(E*v),S=f(w*v),k=f(x*E);return new m(A,B,k,S)}subtract(e){return this.add(e.negate())}wNAF(e){return v.wNAFCached(this,e,m.normalizeZ)}multiply(e){const t=e;ri("scalar",t,Ni,n);const{p:r,f:o}=this.wNAF(t);return m.normalizeZ([r,o])[0]}multiplyUnsafe(e){const t=e;return ri("scalar",t,ji,n),t===ji?E:this.equals(E)||t===Ni?this:this.equals(x)?this.wNAF(t).p:v.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return v.unsafeLadder(this,n).is0()}toAffine(e){return g(this,e)}clearCofactor(){const{h:e}=t;return e===Ni?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:o,a:i}=t,s=r.BYTES;e=Xo("pointHex",e,s),qo("zip215",n);const a=e.slice(),c=e[s-1];a[s-1]=-129&c;const l=Go(a),h=n?u:r.ORDER;ri("pointHex.y",l,ji,h);const p=f(l*l),y=f(p-Ni),b=f(o*p-i);let{isValid:g,value:w}=d(y,b);if(!g)throw new Error("Point.fromHex: invalid y coordinate");const x=(w&Ni)===Ni,E=!!(128&c);if(!n&&w===ji&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==x&&(w=f(-w)),m.fromAffine({x:w,y:l})}static fromPrivateKey(e){return S(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=Yo(t,r.BYTES);return n[n.length-1]|=e&Ni?128:0,n}toHex(){return Mo(this.toRawBytes())}}m.BASE=new m(t.Gx,t.Gy,Ni,f(t.Gx*t.Gy)),m.ZERO=new m(ji,Ni,Ni,ji);const{BASE:x,ZERO:E}=m,v=Oi(m,8*a);function A(e){return wi(e,n)}function B(e){return A(Go(e))}function S(e){const t=a;e=Xo("private key",e,t);const r=Xo("hashed private key",i(e),2*t),n=h(r.slice(0,t)),o=r.slice(t,2*t),s=B(n),c=x.multiply(s),u=c.toRawBytes();return{head:n,prefix:o,scalar:s,point:c,pointBytes:u}}function k(e=new Uint8Array,...t){const r=Qo(...t);return B(i(p(r,Xo("context",e),!!o)))}const U=qi;x._setWindowSize(8);return{CURVE:t,getPublicKey:function(e){return S(e).pointBytes},sign:function(e,t,i={}){e=Xo("message",e),o&&(e=o(e));const{prefix:s,scalar:c,pointBytes:u}=S(t),f=k(i.context,s,e),l=x.multiply(f).toRawBytes(),d=A(f+k(i.context,l,u,e)*c);return ri("signature.s",d,ji,n),Xo("result",Qo(l,Yo(d,r.BYTES)),2*a)},verify:function(e,t,n,i=U){const{context:s,zip215:a}=i,c=r.BYTES;e=Xo("signature",e,2*c),t=Xo("message",t),void 0!==a&&qo("zip215",a),o&&(t=o(t));const u=Go(e.slice(c,2*c));let f,l,d;try{f=m.fromHex(n,a),l=m.fromHex(e.slice(0,c),a),d=x.multiplyUnsafe(u)}catch(p){return!1}if(!a&&f.isSmallOrder())return!1;const h=k(s,l.toRawBytes(),f.toRawBytes(),t);return l.add(f.multiplyUnsafe(h)).subtract(d).clearCofactor().equals(m.ZERO)},ExtendedPoint:m,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>s(r.BYTES),precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}const Mi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Fi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Ki=(BigInt(0),BigInt(1)),zi=BigInt(2),Vi=(BigInt(3),BigInt(5)),Ji=BigInt(8);function Wi(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),i=Mi,s=e*e%i*e%i,a=xi(s,zi,i)*s%i,c=xi(a,Ki,i)*e%i,u=xi(c,Vi,i)*c%i,f=xi(u,t,i)*u%i,l=xi(f,r,i)*f%i,d=xi(l,n,i)*l%i,h=xi(d,o,i)*d%i,p=xi(h,o,i)*d%i,y=xi(p,t,i)*u%i;return{pow_p_5_8:xi(y,zi,i)*e%i,b2:s}}function Gi(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Zi(e,t){const r=Mi,n=wi(t*t*t,r),o=wi(n*n*t,r);let i=wi(e*n*Wi(e*o).pow_p_5_8,r);const s=wi(t*i*i,r),a=i,c=wi(i*Fi,r),u=s===e,f=s===wi(-e,r),l=s===wi(-e*Fi,r);return u&&(i=a),(f||l)&&(i=c),Ai(i,r)&&(i=wi(-i,r)),{isValid:u||f,value:i}}const Yi=(()=>ki(Mi,void 0,!0))(),Xi=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Yi,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ji,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Po,randomBytes:yo,adjustScalarBytes:Gi,uvRatio:Zi}))(),Qi=(()=>Di(Xi))();var es=r(4954);const ts=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ns=new Uint32Array(64);class os extends wo{constructor(){super(64,32,8,!1),this.A=0|rs[0],this.B=0|rs[1],this.C=0|rs[2],this.D=0|rs[3],this.E=0|rs[4],this.F=0|rs[5],this.G=0|rs[6],this.H=0|rs[7]}get(){const{A:e,B:t,C:r,D:n,E:o,F:i,G:s,H:a}=this;return[e,t,r,n,o,i,s,a]}set(e,t,r,n,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let f=0;f<16;f++,t+=4)ns[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const e=ns[f-15],t=ns[f-2],r=so(e,7)^so(e,18)^e>>>3,n=so(t,17)^so(t,19)^t>>>10;ns[f]=n+ns[f-7]+r+ns[f-16]|0}let{A:r,B:n,C:o,D:i,E:s,F:a,G:c,H:u}=this;for(let f=0;f<64;f++){const e=u+(so(s,6)^so(s,11)^so(s,25))+bo(s,a,c)+ts[f]+ns[f]|0,t=(so(r,2)^so(r,13)^so(r,22))+go(r,n,o)|0;u=c,c=a,a=s,s=i+e|0,i=o,o=n,n=r,r=e+t|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,o,i,s,a,c,u)}roundClean(){ns.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const is=po((()=>new os));class ss extends ho{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,to(e);const r=lo(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,o=new Uint8Array(n);o.set(r.length>n?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return ro(this),this.iHash.update(e),this}digestInto(e){ro(this),eo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=n,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const as=(e,t,r)=>new ss(e,t).update(r).digest();function cs(e){void 0!==e.lowS&&qo("lowS",e.lowS),void 0!==e.prehash&&qo("prehash",e.prehash)}as.create=(e,t)=>new ss(e,t);const{Ph:us,aT:fs}=g,ls={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:r}=ls;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,o=Fo(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?Fo(o.length/2|128):"";return`${Fo(e)}${i}${o}${t}`},decode(e,t){const{Err:r}=ls;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const o=t[n++];let i=0;if(!!(128&o)){const e=127&o;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of s)i=i<<8|t;if(n+=e,i<128)throw new r("tlv.decode(long): not minimal encoding")}else i=o;const s=t.subarray(n,n+i);if(s.length!==i)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+i)}}},_int:{encode(e){const{Err:t}=ls;if(e<ds)throw new t("integer: negative integers are not allowed");let r=Fo(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected assertion");return r},decode(e){const{Err:t}=ls;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return us(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=ls,o="string"==typeof e?fs(e):e;Ho(o);const{v:i,l:s}=n.decode(48,o);if(s.length)throw new t("Invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l:f}=n.decode(2,c);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=ls,n=`${t.encode(2,r.encode(e.r))}${t.encode(2,r.encode(e.s))}`;return t.encode(48,n)}},ds=BigInt(0),hs=BigInt(1),ps=(BigInt(2),BigInt(3));BigInt(4);function ys(e){const t=function(e){const t=_i(e);ui(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=ki(t.n,t.nBitLength),o=t.toBytes||((e,t,n)=>{const o=t.toAffine();return Qo(Uint8Array.from([4]),r.toBytes(o.x),r.toBytes(o.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:o}=t,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,n)),o)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:o,n:i}=t;if(r&&"bigint"!=typeof e){if($o(e)&&(e=Mo(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let s;try{s="bigint"==typeof e?e:Wo(Xo("private key",e,n))}catch(a){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return o&&(s=wi(s,i)),ri("private key",s,hs,i),s}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const u=fi(((e,t)=>{const{px:n,py:o,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:o};const s=e.is0();null==t&&(t=s?r.ONE:r.inv(i));const a=r.mul(n,t),c=r.mul(o,t),u=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),f=fi((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:o}=e.toAffine();if(!r.isValid(n)||!r.isValid(o))throw new Error("bad point: x or y not FE");const i=r.sqr(o),a=s(n);if(!r.eql(i,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const o=e=>r.eql(e,r.ZERO);return o(t)&&o(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(i(Xo("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(a(e))}static msm(e,t){return Pi(l,n,e,t)}_setWindowSize(e){h.setWindowSize(this,e)}assertValidity(){f(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:n,pz:o}=this,{px:i,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(i,o)),f=r.eql(r.mul(n,a),r.mul(s,o));return u&&f}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,o=r.mul(n,ps),{px:i,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,f=r.ZERO,d=r.mul(i,i),h=r.mul(s,s),p=r.mul(a,a),y=r.mul(i,s);return y=r.add(y,y),f=r.mul(i,a),f=r.add(f,f),c=r.mul(e,f),u=r.mul(o,p),u=r.add(c,u),c=r.sub(h,u),u=r.add(h,u),u=r.mul(c,u),c=r.mul(y,c),f=r.mul(o,f),p=r.mul(e,p),y=r.sub(d,p),y=r.mul(e,y),y=r.add(y,f),f=r.add(d,d),d=r.add(f,d),d=r.add(d,p),d=r.mul(d,y),u=r.add(u,d),p=r.mul(s,a),p=r.add(p,p),d=r.mul(p,y),c=r.sub(c,d),f=r.mul(p,h),f=r.add(f,f),f=r.add(f,f),new l(c,u,f)}add(e){c(e);const{px:n,py:o,pz:i}=this,{px:s,py:a,pz:u}=e;let f=r.ZERO,d=r.ZERO,h=r.ZERO;const p=t.a,y=r.mul(t.b,ps);let b=r.mul(n,s),g=r.mul(o,a),w=r.mul(i,u),m=r.add(n,o),x=r.add(s,a);m=r.mul(m,x),x=r.add(b,g),m=r.sub(m,x),x=r.add(n,i);let E=r.add(s,u);return x=r.mul(x,E),E=r.add(b,w),x=r.sub(x,E),E=r.add(o,i),f=r.add(a,u),E=r.mul(E,f),f=r.add(g,w),E=r.sub(E,f),h=r.mul(p,x),f=r.mul(y,w),h=r.add(f,h),f=r.sub(g,h),h=r.add(g,h),d=r.mul(f,h),g=r.add(b,b),g=r.add(g,b),w=r.mul(p,w),x=r.mul(y,x),g=r.add(g,w),w=r.sub(b,w),w=r.mul(p,w),x=r.add(x,w),b=r.mul(g,x),d=r.add(d,b),b=r.mul(E,x),f=r.mul(m,f),f=r.sub(f,b),b=r.mul(m,g),h=r.mul(E,h),h=r.add(h,b),new l(f,d,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return h.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){ri("scalar",e,ds,t.n);const n=l.ZERO;if(e===ds)return n;if(e===hs)return this;const{endo:o}=t;if(!o)return h.unsafeLadder(this,e);let{k1neg:i,k1:s,k2neg:a,k2:c}=o.splitScalar(e),u=n,f=n,d=this;for(;s>ds||c>ds;)s&hs&&(u=u.add(d)),c&hs&&(f=f.add(d)),d=d.double(),s>>=hs,c>>=hs;return i&&(u=u.negate()),a&&(f=f.negate()),f=new l(r.mul(f.px,o.beta),f.py,f.pz),u.add(f)}multiply(e){const{endo:n,n:o}=t;let i,s;if(ri("scalar",e,hs,o),n){const{k1neg:t,k1:o,k2neg:a,k2:c}=n.splitScalar(e);let{p:u,f:f}=this.wNAF(o),{p:d,f:p}=this.wNAF(c);u=h.constTimeNegate(t,u),d=h.constTimeNegate(a,d),d=new l(r.mul(d.px,n.beta),d.py,d.pz),i=u.add(d),s=f.add(p)}else{const{p:t,f:r}=this.wNAF(e);i=t,s=r}return l.normalizeZ([i,s])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,o=(e,t)=>t!==ds&&t!==hs&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,r));return i.is0()?void 0:i}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===hs)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===hs?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return qo("isCompressed",e),this.assertValidity(),o(l,this,e)}toHex(e=!0){return qo("isCompressed",e),Mo(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,h=Oi(l,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(e){return ti(e,hs,t.n)}}}function bs(e){const t=function(e){const t=_i(e);return ui(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,o=r.BYTES+1,i=2*r.BYTES+1;function s(e){return wi(e,n)}function a(e){return Ei(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:l}=ys({...t,toBytes(e,t,n){const o=t.toAffine(),i=r.toBytes(o.x),s=Qo;return qo("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,r.toBytes(o.y))},fromBytes(e){const t=e.length,n=e[0],s=e.subarray(1);if(t!==o||2!==n&&3!==n){if(t===i&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}{const e=Wo(s);if(!ti(e,hs,r.ORDER))throw new Error("Point is not on curve");const t=f(e);let o;try{o=r.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("Point is not on curve"+e)}return!(1&~n)!==((o&hs)===hs)&&(o=r.neg(o)),{x:e,y:o}}}}),d=e=>Mo(Zo(e,t.nByteLength));function h(e){return e>n>>hs}const p=(e,t,r)=>Wo(e.slice(t,r));class y{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Xo("compactSignature",e,2*r),new y(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=ls.toSig(Xo("DER",e));return new y(t,r)}assertValidity(){ri("r",this.r,hs,n),ri("s",this.s,hs,n)}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:o,recovery:i}=this,u=m(Xo("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const f=2===i||3===i?n+t.n:n;if(f>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&i?"03":"02",h=c.fromHex(l+d(f)),p=a(f),y=s(-u*p),b=s(o*p),g=c.BASE.multiplyAndAddUnsafe(h,y,b);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Jo(this.toDERHex())}toDERHex(){return ls.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Jo(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const b={isValidPrivateKey(e){try{return u(e),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Ci(t.n);return function(e,t,r=!1){const n=e.length,o=Ui(t),i=Ci(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const s=wi(r?Wo(e):Go(e),t-di)+di;return r?Yo(s,o):Zo(s,o)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function g(e){const t=$o(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===o||n===i:r?n===2*o||n===2*i:e instanceof c}const w=t.bits2int||function(e){const r=Wo(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},m=t.bits2int_modN||function(e){return s(w(e))},x=oi(t.nBitLength);function E(e){return ri(`num < 2^${t.nBitLength}`,e,ds,x),Zo(e,t.nByteLength)}function v(e,n,o=A){if(["recovered","canonical"].some((e=>e in o)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:f}=t;let{lowS:d,prehash:p,extraEntropy:b}=o;null==d&&(d=!0),e=Xo("msgHash",e),cs(o),p&&(e=Xo("prehashed msgHash",i(e)));const g=m(e),x=u(n),v=[E(x),E(g)];if(null!=b&&!1!==b){const e=!0===b?f(r.BYTES):b;v.push(Xo("extraEntropy",e))}const B=Qo(...v),S=g;return{seed:B,k2sig:function(e){const t=w(e);if(!l(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),o=s(n.x);if(o===ds)return;const i=s(r*s(S+o*x));if(i===ds)return;let u=(n.x===o?0:2)|Number(n.y&hs),f=i;return d&&h(i)&&(f=function(e){return h(e)?s(-e):e}(i),u^=1),new y(o,f,u)}}}const A={lowS:t.lowS,prehash:!1},B={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(g(e))throw new Error("first arg must be private key");if(!g(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,r,n=A){const{seed:o,k2sig:i}=v(e,r,n),s=t;return ai(s.hash.outputLen,s.nByteLength,s.hmac)(o,i)},verify:function(e,r,n,o=B){const i=e;if(r=Xo("msgHash",r),n=Xo("publicKey",n),"strict"in o)throw new Error("options.strict was renamed to lowS");cs(o);const{lowS:u,prehash:f}=o;let l,d;try{if("string"==typeof i||$o(i))try{l=y.fromDER(i)}catch(v){if(!(v instanceof ls.Err))throw v;l=y.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:t}=i;l=new y(e,t)}}d=c.fromHex(n)}catch(A){if("PARSE"===A.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&l.hasHighS())return!1;f&&(r=t.hash(r));const{r:h,s:p}=l,b=m(r),g=a(p),w=s(b*g),x=s(h*g),E=c.BASE.multiplyAndAddUnsafe(d,w,x)?.toAffine();return!!E&&s(E.x)===h},ProjectivePoint:c,Signature:y,utils:b}}function gs(e){return{hash:e,hmac:(t,...r)=>as(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];eo(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const t=e[n];r.set(t,o),o+=t.length}return r}(...r)),randomBytes:yo}}function ws(e,t){const r=t=>bs({...e,...gs(t)});return Object.freeze({...r(t),create:r})}const ms=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Es=BigInt(1),vs=BigInt(2),As=(e,t)=>(e+t/vs)/t;function Bs(e){const t=ms,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,l=xi(f,r,t)*f%t,d=xi(l,r,t)*f%t,h=xi(d,vs,t)*u%t,p=xi(h,o,t)*h%t,y=xi(p,i,t)*p%t,b=xi(y,a,t)*y%t,g=xi(b,c,t)*b%t,w=xi(g,a,t)*y%t,m=xi(w,r,t)*f%t,x=xi(m,s,t)*p%t,E=xi(x,n,t)*u%t,v=xi(E,vs,t);if(!Ss.eql(Ss.sqr(v),e))throw new Error("Cannot find square root");return v}const Ss=ki(ms,void 0,void 0,{sqrt:Bs}),ks=ws({a:BigInt(0),b:BigInt(7),Fp:Ss,n:xs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=xs,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Es*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,s=BigInt("0x100000000000000000000000000000000"),a=As(i*e,t),c=As(-n*e,t);let u=wi(e-a*r-c*o,t),f=wi(-a*n-c*i,t);const l=u>s,d=f>s;if(l&&(u=t-u),d&&(f=t-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:d,k2:f}}}},is);BigInt(0);ks.ProjectivePoint;const Us=ki(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Cs=Us.create(BigInt("-3")),Rs=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Ts=ws({a:Cs,b:Rs,Fp:Us,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},is),Is=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ls=new Uint8Array(new Array(16).fill(0).map(((e,t)=>t))),Os=Ls.map((e=>(9*e+5)%16));let Ps=[Ls],_s=[Os];for(let Uf=0;Uf<4;Uf++)for(let e of[Ps,_s])e.push(e[Uf].map((e=>Is[e])));const js=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),Ns=Ps.map(((e,t)=>e.map((e=>js[t][e])))),$s=_s.map(((e,t)=>e.map((e=>js[t][e])))),Hs=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),qs=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function Ds(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const Ms=new Uint32Array(16);class Fs extends wo{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:n,h4:o}=this;return[e,t,r,n,o]}set(e,t,r,n,o){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|o}process(e,t){for(let d=0;d<16;d++,t+=4)Ms[d]=e.getUint32(t,!0);let r=0|this.h0,n=r,o=0|this.h1,i=o,s=0|this.h2,a=s,c=0|this.h3,u=c,f=0|this.h4,l=f;for(let d=0;d<5;d++){const e=4-d,t=Hs[d],h=qs[d],p=Ps[d],y=_s[d],b=Ns[d],g=$s[d];for(let n=0;n<16;n++){const e=ao(r+Ds(d,o,s,c)+Ms[p[n]]+t,b[n])+f|0;r=f,f=c,c=0|ao(s,10),s=o,o=e}for(let r=0;r<16;r++){const t=ao(n+Ds(e,i,a,u)+Ms[y[r]]+h,g[r])+l|0;n=l,l=u,u=0|ao(a,10),a=i,i=t}}this.set(this.h1+s+u|0,this.h2+c+l|0,this.h3+f+n|0,this.h4+r+i|0,this.h0+o+a|0)}roundClean(){Ms.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ks=po((()=>new Fs)),zs=[],Vs=[],Js=[],Ws=BigInt(0),Gs=BigInt(1),Zs=BigInt(2),Ys=BigInt(7),Xs=BigInt(256),Qs=BigInt(113);for(let Uf=0,Cf=Gs,Rf=1,Tf=0;Uf<24;Uf++){[Rf,Tf]=[Tf,(2*Rf+3*Tf)%5],zs.push(2*(5*Tf+Rf)),Vs.push((Uf+1)*(Uf+2)/2%64);let e=Ws;for(let t=0;t<7;t++)Cf=(Cf<<Gs^(Cf>>Ys)*Qs)%Xs,Cf&Zs&&(e^=Gs<<(Gs<<BigInt(t))-Gs);Js.push(e)}const[ea,ta]=vo(Js,!0),ra=(e,t,r)=>r>32?So(e,t,r):Ao(e,t,r),na=(e,t,r)=>r>32?ko(e,t,r):Bo(e,t,r);class oa extends ho{constructor(e,t,r,n=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Qn(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){co||fo(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,o=(n+2)%10,i=r[o],s=r[o+1],a=ra(i,s,1)^r[t],c=na(i,s,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=c}let t=e[2],o=e[3];for(let r=0;r<24;r++){const n=Vs[r],i=ra(t,o,n),s=na(t,o,n),a=zs[r];t=e[a],o=e[a+1],e[a]=i,e[a+1]=s}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=ea[n],e[1]^=ta[n]}r.fill(0)}(this.state32,this.rounds),co||fo(this.state32),this.posOut=0,this.pos=0}update(e){ro(this);const{blockLen:t,state:r}=this,n=(e=lo(e)).length;for(let o=0;o<n;){const i=Math.min(t-this.pos,n-o);for(let t=0;t<i;t++)r[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){ro(this,!1),eo(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,o=e.length;n<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Qn(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(no(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:o,enableXOF:i}=this;return e||(e=new oa(t,r,n,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}const ia=(e,t,r)=>po((()=>new oa(t,e,r))),sa=ia(1,136,32);var aa=r(5191);function ca(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function ua(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function fa(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function la(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(ca(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function da(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function ha(e,t="="){if(ca(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function pa(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}const ya=(e,t)=>t?ya(t,e%t):e,ba=(e,t)=>e+(t-ya(e,t));function ga(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(ba(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${ba(t,r)}`);let o=0,i=0;const s=2**r-1,a=[];for(const c of e){if(ca(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(o=o<<t|c,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)a.push((o>>i-r&s)>>>0);o&=2**i-1}if(o=o<<r-i&s,!n&&i>=t)throw new Error("Excess padding");if(!n&&o)throw new Error(`Non-zero padding: ${o}`);return n&&i>0&&a.push(o>>>0),a}function wa(e,t=!1){if(ca(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ba(8,e)>32||ba(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!ua(r))throw new Error("radix2.encode input should be Uint8Array");return ga(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(ga(r,e,8,t))}}}function ma(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(r){}}}wa(4),la("0123456789ABCDEF"),da(""),wa(5),la("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ha(5),da(""),wa(5),la("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),da(""),wa(5),la("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ha(5),da(""),wa(5),la("0123456789ABCDEFGHIJKLMNOPQRSTUV"),da(""),wa(5),la("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),da(""),pa((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),wa(6),la("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ha(6),da(""),wa(6),la("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),da(""),wa(6),la("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ha(6),da(""),wa(6),la("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),da("");const xa=fa(la("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),da("")),Ea=[996825010,642813549,513874426,1027748829,705979059];function va(e){const t=e>>25;let r=(33554431&e)<<5;for(let n=0;n<Ea.length;n++)1==(t>>n&1)&&(r^=Ea[n]);return r}function Aa(e,t,r=1){const n=e.length;let o=1;for(let i=0;i<n;i++){const t=e.charCodeAt(i);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);o=va(o)^t>>5}o=va(o);for(let i=0;i<n;i++)o=va(o)^31&e.charCodeAt(i);for(let i of t)o=va(o)^i;for(let i=0;i<6;i++)o=va(o);return o^=r,xa.encode(ga([o%2**30],30,5,!1))}function Ba(e){const t="bech32"===e?1:734539939,r=wa(5),n=r.decode,o=r.encode,i=ma(n);function s(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=n.lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=n.slice(0,o),s=n.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=xa.decode(s).slice(0,-6),c=Aa(i,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const o=e.length+7+r.length;if(!1!==n&&o>n)throw new TypeError(`Length ${o} exceeds limit ${n}`);const i=e.toLowerCase(),s=Aa(i,r,t);return`${i}1${xa.encode(r)}${s}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:r}=s(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:ma(s),fromWords:n,fromWordsUnsafe:i,toWords:o}}const Sa=Ba("bech32");wa(4),la("0123456789abcdef"),da(""),pa((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));function ka(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Ua(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function Ca(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Ra(e,...t){if(!Ca(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ta(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ia(e,t){Ra(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const La=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Oa=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Pa(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Ca(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e}const _a=(e,t)=>(Object.assign(t,e),t);function ja(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),a=Number(r&i),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}const Na=(e,t)=>255&e[t++]|(255&e[t++])<<8;class $a{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Ra(e=Pa(e),32);const t=Na(e,0),r=Na(e,2),n=Na(e,4),o=Na(e,6),i=Na(e,8),s=Na(e,10),a=Na(e,12),c=Na(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|n<<6),this.r[3]=8191&(n>>>7|o<<9),this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,this.r[6]=8191&(i>>>14|s<<2),this.r[7]=8065&(s>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Na(e,16+2*u)}process(e,t,r=!1){const n=r?0:2048,{h:o,r:i}=this,s=i[0],a=i[1],c=i[2],u=i[3],f=i[4],l=i[5],d=i[6],h=i[7],p=i[8],y=i[9],b=Na(e,t+0),g=Na(e,t+2),w=Na(e,t+4),m=Na(e,t+6),x=Na(e,t+8),E=Na(e,t+10),v=Na(e,t+12),A=Na(e,t+14);let B=o[0]+(8191&b),S=o[1]+(8191&(b>>>13|g<<3)),k=o[2]+(8191&(g>>>10|w<<6)),U=o[3]+(8191&(w>>>7|m<<9)),C=o[4]+(8191&(m>>>4|x<<12)),R=o[5]+(x>>>1&8191),T=o[6]+(8191&(x>>>14|E<<2)),I=o[7]+(8191&(E>>>11|v<<5)),L=o[8]+(8191&(v>>>8|A<<8)),O=o[9]+(A>>>5|n),P=0,_=P+B*s+S*(5*y)+k*(5*p)+U*(5*h)+C*(5*d);P=_>>>13,_&=8191,_+=R*(5*l)+T*(5*f)+I*(5*u)+L*(5*c)+O*(5*a),P+=_>>>13,_&=8191;let j=P+B*a+S*s+k*(5*y)+U*(5*p)+C*(5*h);P=j>>>13,j&=8191,j+=R*(5*d)+T*(5*l)+I*(5*f)+L*(5*u)+O*(5*c),P+=j>>>13,j&=8191;let N=P+B*c+S*a+k*s+U*(5*y)+C*(5*p);P=N>>>13,N&=8191,N+=R*(5*h)+T*(5*d)+I*(5*l)+L*(5*f)+O*(5*u),P+=N>>>13,N&=8191;let $=P+B*u+S*c+k*a+U*s+C*(5*y);P=$>>>13,$&=8191,$+=R*(5*p)+T*(5*h)+I*(5*d)+L*(5*l)+O*(5*f),P+=$>>>13,$&=8191;let H=P+B*f+S*u+k*c+U*a+C*s;P=H>>>13,H&=8191,H+=R*(5*y)+T*(5*p)+I*(5*h)+L*(5*d)+O*(5*l),P+=H>>>13,H&=8191;let q=P+B*l+S*f+k*u+U*c+C*a;P=q>>>13,q&=8191,q+=R*s+T*(5*y)+I*(5*p)+L*(5*h)+O*(5*d),P+=q>>>13,q&=8191;let D=P+B*d+S*l+k*f+U*u+C*c;P=D>>>13,D&=8191,D+=R*a+T*s+I*(5*y)+L*(5*p)+O*(5*h),P+=D>>>13,D&=8191;let M=P+B*h+S*d+k*l+U*f+C*u;P=M>>>13,M&=8191,M+=R*c+T*a+I*s+L*(5*y)+O*(5*p),P+=M>>>13,M&=8191;let F=P+B*p+S*h+k*d+U*l+C*f;P=F>>>13,F&=8191,F+=R*u+T*c+I*a+L*s+O*(5*y),P+=F>>>13,F&=8191;let K=P+B*y+S*p+k*h+U*d+C*l;P=K>>>13,K&=8191,K+=R*f+T*u+I*c+L*a+O*s,P+=K>>>13,K&=8191,P=(P<<2)+P|0,P=P+_|0,_=8191&P,P>>>=13,j+=P,o[0]=_,o[1]=j,o[2]=N,o[3]=$,o[4]=H,o[5]=q,o[6]=D,o[7]=M,o[8]=F,o[9]=K}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let s=2;s<10;s++)e[s]+=n,n=e[s]>>>13,e[s]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let s=1;s<10;s++)r[s]=e[s]+n,n=r[s]>>>13,r[s]&=8191;r[9]-=8192;let o=(1^n)-1;for(let s=0;s<10;s++)r[s]&=o;o=~o;for(let s=0;s<10;s++)e[s]=e[s]&o|r[s];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let i=e[0]+t[0];e[0]=65535&i;for(let s=1;s<8;s++)i=(e[s]+t[s]|0)+(i>>>16)|0,e[s]=65535&i}update(e){Ta(this);const{buffer:t,blockLen:r}=this,n=(e=Pa(e)).length;for(let o=0;o<n;){const i=Math.min(r-this.pos,n-o);if(i!==r)t.set(e.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=n-o;o+=r)this.process(e,o)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Ta(this),Ia(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)e[o++]=r[i]>>>0,e[o++]=r[i]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const Ha=function(e){const t=(t,r)=>e(r).update(Pa(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new $a(e))),qa=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Da=qa("expand 16-byte k"),Ma=qa("expand 32-byte k"),Fa=La(Da),Ka=La(Ma);Ka.slice();function za(e,t){return e<<t|e>>>32-t}function Va(e){return e.byteOffset%4==0}const Ja=64,Wa=16,Ga=2**32-1,Za=new Uint32Array;function Ya(e,t){const{allowShortKeys:r,extendNonceFn:n,counterLength:o,counterRight:i,rounds:s}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw new Error("core must be a function");return ka(o),ka(s),Ua(i),Ua(r),(t,a,c,u,f=0)=>{Ra(t),Ra(a),Ra(c);const l=c.length;if(u||(u=new Uint8Array(l)),Ra(u),ka(f),f<0||f>=Ga)throw new Error("arx: counter overflow");if(u.length<l)throw new Error(`arx: output (${u.length}) is shorter than data (${l})`);const d=[];let h,p,y=t.length;if(32===y)h=t.slice(),d.push(h),p=Ka;else{if(16!==y||!r)throw new Error(`arx: invalid 32-byte key, got length=${y}`);h=new Uint8Array(32),h.set(t),h.set(t,16),p=Fa,d.push(h)}Va(a)||(a=a.slice(),d.push(a));const b=La(h);if(n){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");n(p,b,La(a.subarray(0,16)),b),a=a.subarray(16)}const g=16-o;if(g!==a.length)throw new Error(`arx: nonce must be ${g} or 16 bytes`);if(12!==g){const e=new Uint8Array(12);e.set(a,i?0:12-a.length),a=e,d.push(a)}const w=La(a);for(!function(e,t,r,n,o,i,s,a){const c=o.length,u=new Uint8Array(Ja),f=La(u),l=Va(o)&&Va(i),d=l?La(o):Za,h=l?La(i):Za;for(let p=0;p<c;s++){if(e(t,r,n,f,s,a),s>=Ga)throw new Error("arx: counter overflow");const y=Math.min(Ja,c-p);if(l&&y===Ja){const e=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<Wa;r++)t=e+r,h[t]=d[t]^f[r];p+=Ja}else{for(let e,t=0;t<y;t++)e=p+t,i[e]=o[e]^u[t];p+=y}}}(e,p,b,w,c,u,f,s);d.length>0;)d.pop().fill(0);return u}}function Xa(e,t,r,n,o,i=20){let s=e[0],a=e[1],c=e[2],u=e[3],f=t[0],l=t[1],d=t[2],h=t[3],p=t[4],y=t[5],b=t[6],g=t[7],w=o,m=r[0],x=r[1],E=r[2],v=s,A=a,B=c,S=u,k=f,U=l,C=d,R=h,T=p,I=y,L=b,O=g,P=w,_=m,j=x,N=E;for(let H=0;H<i;H+=2)v=v+k|0,P=za(P^v,16),T=T+P|0,k=za(k^T,12),v=v+k|0,P=za(P^v,8),T=T+P|0,k=za(k^T,7),A=A+U|0,_=za(_^A,16),I=I+_|0,U=za(U^I,12),A=A+U|0,_=za(_^A,8),I=I+_|0,U=za(U^I,7),B=B+C|0,j=za(j^B,16),L=L+j|0,C=za(C^L,12),B=B+C|0,j=za(j^B,8),L=L+j|0,C=za(C^L,7),S=S+R|0,N=za(N^S,16),O=O+N|0,R=za(R^O,12),S=S+R|0,N=za(N^S,8),O=O+N|0,R=za(R^O,7),v=v+U|0,N=za(N^v,16),L=L+N|0,U=za(U^L,12),v=v+U|0,N=za(N^v,8),L=L+N|0,U=za(U^L,7),A=A+C|0,P=za(P^A,16),O=O+P|0,C=za(C^O,12),A=A+C|0,P=za(P^A,8),O=O+P|0,C=za(C^O,7),B=B+R|0,_=za(_^B,16),T=T+_|0,R=za(R^T,12),B=B+R|0,_=za(_^B,8),T=T+_|0,R=za(R^T,7),S=S+k|0,j=za(j^S,16),I=I+j|0,k=za(k^I,12),S=S+k|0,j=za(j^S,8),I=I+j|0,k=za(k^I,7);let $=0;n[$++]=s+v|0,n[$++]=a+A|0,n[$++]=c+B|0,n[$++]=u+S|0,n[$++]=f+k|0,n[$++]=l+U|0,n[$++]=d+C|0,n[$++]=h+R|0,n[$++]=p+T|0,n[$++]=y+I|0,n[$++]=b+L|0,n[$++]=g+O|0,n[$++]=w+P|0,n[$++]=m+_|0,n[$++]=x+j|0,n[$++]=E+N|0}const Qa=Ya(Xa,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ec=Ya(Xa,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,r,n){let o=e[0],i=e[1],s=e[2],a=e[3],c=t[0],u=t[1],f=t[2],l=t[3],d=t[4],h=t[5],p=t[6],y=t[7],b=r[0],g=r[1],w=r[2],m=r[3];for(let E=0;E<20;E+=2)o=o+c|0,b=za(b^o,16),d=d+b|0,c=za(c^d,12),o=o+c|0,b=za(b^o,8),d=d+b|0,c=za(c^d,7),i=i+u|0,g=za(g^i,16),h=h+g|0,u=za(u^h,12),i=i+u|0,g=za(g^i,8),h=h+g|0,u=za(u^h,7),s=s+f|0,w=za(w^s,16),p=p+w|0,f=za(f^p,12),s=s+f|0,w=za(w^s,8),p=p+w|0,f=za(f^p,7),a=a+l|0,m=za(m^a,16),y=y+m|0,l=za(l^y,12),a=a+l|0,m=za(m^a,8),y=y+m|0,l=za(l^y,7),o=o+u|0,m=za(m^o,16),p=p+m|0,u=za(u^p,12),o=o+u|0,m=za(m^o,8),p=p+m|0,u=za(u^p,7),i=i+f|0,b=za(b^i,16),y=y+b|0,f=za(f^y,12),i=i+f|0,b=za(b^i,8),y=y+b|0,f=za(f^y,7),s=s+l|0,g=za(g^s,16),d=d+g|0,l=za(l^d,12),s=s+l|0,g=za(g^s,8),d=d+g|0,l=za(l^d,7),a=a+c|0,w=za(w^a,16),h=h+w|0,c=za(c^h,12),a=a+c|0,w=za(w^a,8),h=h+w|0,c=za(c^h,7);let x=0;n[x++]=o,n[x++]=i,n[x++]=s,n[x++]=a,n[x++]=b,n[x++]=g,n[x++]=w,n[x++]=m},allowShortKeys:!1}),tc=new Uint8Array(16),rc=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(tc.subarray(r))},nc=new Uint8Array(32);function oc(e,t,r,n,o){const i=e(t,r,nc),s=Ha.create(i);o&&rc(s,o),rc(s,n);const a=new Uint8Array(16),c=Oa(a);ja(c,0,BigInt(o?o.length:0),!0),ja(c,8,BigInt(n.length),!0),s.update(a);const u=s.digest();return i.fill(0),u}const ic=e=>(t,r,n)=>{const o=16;return Ra(t,32),Ra(r),{encrypt:(i,s)=>{const a=i.length,c=a+o;s?Ra(s,c):s=new Uint8Array(c),e(t,r,i,s,1);const u=oc(e,t,r,s.subarray(0,-16),n);return s.set(u,a),s},decrypt:(i,s)=>{const a=i.length,c=a-o;if(a<o)throw new Error("encrypted data must be at least 16 bytes");s?Ra(s,c):s=new Uint8Array(c);const u=i.subarray(0,-16);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(i.subarray(-16),oc(e,t,r,u,n)))throw new Error("invalid tag");return e(t,r,u,s,1),s}}},sc=(ic(Qa),ic(ec),{toString:Xn,fromString:Yn,concat:function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=xr(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return mr(r)}});function ac(e){return sc.toString(e,"base64url")}function cc(e){const t=e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return sc.fromString(t,"base64url")}function uc(e){return sc.fromString(e,"base58btc")}const fc={Secp256k1SignatureVerificationKey2018:"Secp256k1",Secp256k1VerificationKey2018:"Secp256k1",EcdsaSecp256k1VerificationKey2019:"Secp256k1",EcdsaPublicKeySecp256k1:"Secp256k1",EcdsaSecp256k1RecoveryMethod2020:"Secp256k1",EcdsaSecp256r1VerificationKey2019:"P-256",Ed25519VerificationKey2018:"Ed25519",Ed25519VerificationKey2020:"Ed25519",ED25519SignatureVerification:"Ed25519",X25519KeyAgreementKey2019:"X25519",X25519KeyAgreementKey2020:"X25519",ConditionalProof2022:void 0,JsonWebKey2020:void 0,Multikey:void 0},lc={"ed25519-pub":237,"x25519-pub":236,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"p256-pub":4608},dc={"bls12_381-g1-pub":"Bls12381G1","bls12_381-g2-pub":"Bls12381G2","ed25519-pub":"Ed25519","p256-pub":"P-256","secp256k1-pub":"Secp256k1","x25519-pub":"X25519"};function hc(e){if(e.publicKeyBase58)return{keyBytes:uc(e.publicKeyBase58),keyType:fc[e.type]};if(e.publicKeyBase64)return{keyBytes:cc(e.publicKeyBase64),keyType:fc[e.type]};if(e.publicKeyHex)return{keyBytes:pc(e.publicKeyHex),keyType:fc[e.type]};if(e.publicKeyJwk&&"secp256k1"===e.publicKeyJwk.crv&&e.publicKeyJwk.x&&e.publicKeyJwk.y)return{keyBytes:ks.ProjectivePoint.fromAffine({x:gc(cc(e.publicKeyJwk.x)),y:gc(cc(e.publicKeyJwk.y))}).toRawBytes(!1),keyType:"Secp256k1"};if(e.publicKeyJwk&&"P-256"===e.publicKeyJwk.crv&&e.publicKeyJwk.x&&e.publicKeyJwk.y)return{keyBytes:Ts.ProjectivePoint.fromAffine({x:gc(cc(e.publicKeyJwk.x)),y:gc(cc(e.publicKeyJwk.y))}).toRawBytes(!1),keyType:"P-256"};if(e.publicKeyJwk&&"OKP"===e.publicKeyJwk.kty&&["Ed25519","X25519"].includes(e.publicKeyJwk.crv??"")&&e.publicKeyJwk.x)return{keyBytes:cc(e.publicKeyJwk.x),keyType:e.publicKeyJwk.crv};if(e.publicKeyMultibase){const{keyBytes:t,keyType:r}=function(e){const t=(0,es.decode)(e);if([32,33,48,64,65,96].includes(t.length))return{keyBytes:t};try{const[e,r]=Bn(t),n=Object.entries(lc).filter((([,t])=>t===e))?.[0][0]??"";return{keyBytes:t.slice(r),keyType:dc[n]}}catch(r){return{keyBytes:t}}}(e.publicKeyMultibase);return{keyBytes:t,keyType:r??fc[e.type]}}return{keyBytes:new Uint8Array}}function pc(e,t){let r=e.startsWith("0x")?e.substring(2):e;if(r.length%2!=0&&(r=`0${r}`),t){const e=Math.max(r.length,2*t);r=r.padStart(e,"00")}return sc.fromString(r.toLowerCase(),"base16")}function yc(e){return ac(sc.fromString(e))}function bc(e){return sc.toString(e,"base16")}function gc(e){return BigInt("0x"+sc.toString(e,"base16"))}function wc(e){return sc.fromString(e,"utf-8")}function mc({r:e,s:t,recoveryParam:r},n){const o=new Uint8Array(n?65:64);if(o.set(sc.fromString(e,"base16"),0),o.set(sc.fromString(t,"base16"),32),n){if(void 0===r)throw new Error("Signer did not return a recoveryParam");o[64]=r}return ac(o)}function xc(e){const t=cc(e);if(t.length<64||t.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${t.length}`);return{r:bc(t.slice(0,32)),s:bc(t.slice(32,64)),recoveryParam:65===t.length?t[64]:void 0}}function Ec(e){const t="string"==typeof e?Yn(e):e;return is(t)}const vc=sa;function Ac(e){const t=Yn(e.slice(2),"base16");return`0x${Xn(vc(t).slice(-20),"base16")}`}function Bc(e){return"object"==typeof e&&"r"in e&&"s"in e}function Sc(e){return function(t,r){try{return Promise.resolve(r(t)).then((function(t){if(Bc(t))return mc(t,e);if(e&&void 0===xc(t).recoveryParam)throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return t}))}catch(n){return Promise.reject(n)}}}function kc(){return function(e,t){try{return Promise.resolve(t(e)).then((function(e){if(Bc(e))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return e}))}catch(r){return Promise.reject(r)}}}const Uc={ES256:function(e,t){try{return Promise.resolve(t(e)).then((function(e){return Bc(e)?mc(e):e}))}catch(r){return Promise.reject(r)}},ES256K:Sc(),"ES256K-R":Sc(!0),Ed25519:kc(),EdDSA:kc()};function Cc(e,t){const r=bc(uc(t).slice(0,1)),n=pc(e),o=r+bc(Ks(Ec(n))),i=Ec(pc(o)),s=bc(Ec(i)).substring(0,8);return a=pc(o+s),sc.toString(a,"base58btc");var a}function Rc(e,t){if(t){const r=t.split(":");switch(r[0]){case"bip122":r[r.length-1]=Cc(e,r[r.length-1]);break;case"cosmos":r[r.length-1]=function(e,t){const r=ks.ProjectivePoint.fromHex(e).toRawBytes(),n=Ks(Ec(r)),o=Sa.toWords(n);return Sa.encode(t,o).replace(t,"")}(e,r[1]);break;case"eip155":r[r.length-1]=Ac(e);break;default:return!1}return r.join(":").toLowerCase()===t.toLowerCase()}return!1}function Tc(e,t=!1){const r=cc(e);if(r.length!==(t?65:64))throw new Error("wrong signature length");return{compact:r.slice(0,64),recovery:r[64]}}function Ic(e,t,r){const n=[];if(t.length>86)n.push(Tc(t,!0));else{const e=Tc(t,!1);n.push({...e,recovery:0}),n.push({...e,recovery:1})}const o=Ec(e),i=e=>{const t=ks.Signature.fromCompact(e.compact).addRecoveryBit(e.recovery||0).recoverPublicKey(o),n=Ac(t.toHex(!1)).toLowerCase(),i=t.toHex(!1),s=t.toHex(!0);return r.find((e=>{const{keyBytes:t}=hc(e),r=bc(t);return r===i||r===s||e.ethereumAddress?.toLowerCase()===n||e.blockchainAccountId?.split("@eip155")?.[0].toLowerCase()===n||Rc(i,e.blockchainAccountId)}))};for(const s of n){const e=i(s);if(e)return e}throw new Error("invalid_signature: Signature invalid for JWT")}function Lc(e,t,r){const n=wc(e),o=cc(t),i=r.find((e=>{const{keyBytes:t,keyType:r}=hc(e);return"Ed25519"===r&&Qi.verify(o,n,t)}));if(!i)throw new Error("invalid_signature: Signature invalid for JWT");return i}const Oc={ES256:function(e,t,r){const n=Ec(e),o=Ts.Signature.fromCompact(Tc(t).compact),i=r.filter((e=>!e.ethereumAddress&&!e.blockchainAccountId)),s=i.find((e=>{try{const{keyBytes:t}=hc(e);return Ts.verify(o,n,t)}catch(t){return!1}}));if(!s)throw new Error("invalid_signature: Signature invalid for JWT");return s},ES256K:function(e,t,r){const n=Ec(e),o=ks.Signature.fromCompact(cc(t)).normalizeS(),i=r.filter((e=>!e.ethereumAddress&&!e.blockchainAccountId)),s=r.filter((e=>e.ethereumAddress||e.blockchainAccountId));let a=i.find((e=>{try{const{keyBytes:t}=hc(e);return ks.verify(o,n,t)}catch(t){return!1}}));if(!a&&s.length>0&&(a=Ic(e,t,s)),!a)throw new Error("invalid_signature: Signature invalid for JWT");return a},"ES256K-R":Ic,Ed25519:Lc,EdDSA:Lc};function Pc(e){const t=Oc[e];if(!t)throw new Error(`not_supported: Unsupported algorithm ${e}`);return t}Pc.toSignatureObject=function(e,t=!1){const r=cc(e);if(r.length!==(t?65:64))throw new Error("wrong signature length");const n={r:bc(r.slice(0,32)),s:bc(r.slice(32,64))};return t&&(n.recoveryParam=r[64]),n};"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));const _c=function(e,{issuer:t,signer:r,alg:n,expiresIn:o,canonicalize:i},s={}){try{if(!r)throw new Error("missing_signer: No Signer functionality has been configured");if(!t)throw new Error("missing_issuer: No issuing DID has been configured");s.typ||(s.typ="JWT"),s.alg||(s.alg=n);const a={iat:Math.floor(Date.now()/1e3),exp:void 0};if(o){if("number"!=typeof o)throw new Error("invalid_argument: JWT expiresIn is not a number");a.exp=(e.nbf||a.iat)+Math.floor(o)}const c={...a,...e,iss:t};return jc(c,r,s,{canonicalize:i})}catch(a){return Promise.reject(a)}},jc=function(e,t,r={},n={}){try{r.alg||(r.alg=Nc);const o="string"==typeof e?e:$c(e,n.canonicalize),i=[$c(r,n.canonicalize),o].join("."),s=function(e){const t=Uc[e];if(!t)throw new Error(`not_supported: Unsupported algorithm ${e}`);return t}(r.alg);return Promise.resolve(s(i,t)).then((function(e){return[i,e].join(".")}))}catch(o){return Promise.reject(o)}},Nc="ES256K";function $c(e,t=!1){return yc(t?aa(e):JSON.stringify(e))}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));function Hc(e=0){return new Uint8Array(e)}new Uint8Array(0);function qc(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var Dc=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==r[s])throw new TypeError(i+" is ambiguous");r[s]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,o=0;e[t]===c;)n++,t++;for(var i=(e.length-t)*u+1>>>0,s=new Uint8Array(i);e[t];){var f=r[e.charCodeAt(t)];if(255===f)return;for(var l=0,d=i-1;(0!==f||l<o)&&-1!==d;d--,l++)f+=a*s[d]>>>0,s[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");o=l,t++}if(" "!==e[t]){for(var h=i-o;h!==i&&0===s[h];)h++;for(var p=new Uint8Array(n+(i-h)),y=n;h!==i;)p[y++]=s[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,o=0,i=t.length;o!==i&&0===t[o];)o++,r++;for(var s=(i-o)*f+1>>>0,u=new Uint8Array(s);o!==i;){for(var l=t[o],d=0,h=s-1;(0!==l||d<n)&&-1!==h;h--,d++)l+=256*u[h]>>>0,u[h]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,o++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var y=c.repeat(r);p<s;++p)y+=e.charAt(u[p]);return y},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const Mc=Dc;class Fc{name;prefix;baseEncode;constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Kc{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Vc(this,e)}}class zc{decoders;constructor(e){this.decoders=e}or(e){return Vc(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function Vc(e,t){return new zc({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class Jc{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Fc(e,t,r),this.decoder=new Kc(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function Wc({name:e,prefix:t,encode:r,decode:n}){return new Jc(e,t,r,n)}function Gc({name:e,prefix:t,alphabet:r}){const{encode:n,decode:o}=Mc(r,e);return Wc({prefix:t,name:e,encode:n,decode:e=>qc(o(e))})}function Zc({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return Wc({prefix:t,name:e,encode:e=>function(e,t,r){const n="="===t[t.length-1],o=(1<<r)-1;let i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,i+=t[o&a>>s];if(0!==s&&(i+=t[o&a<<r-s]),n)for(;i.length*r&7;)i+="=";return i}(e,n,r),decode:t=>function(e,t,r,n){const o={};for(let f=0;f<t.length;++f)o[t[f]]=f;let i=e.length;for(;"="===e[i-1];)--i;const s=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let f=0;f<i;++f){const t=o[e[f]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}(t,n,r,e)})}const Yc=Gc({prefix:"9",name:"base10",alphabet:"0123456789"}),Xc=Zc({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Qc=Zc({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eu=Zc({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),tu=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),ru=tu.reduce(((e,t,r)=>(e[r]=t,e)),[]),nu=tu.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const ou=Wc({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=ru[t]),"")},decode:function(e){const t=[];for(const r of e){const e=nu[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}}),iu=Zc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),su=Zc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),au=Zc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cu=Zc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uu=Zc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fu=Zc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lu=Zc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),du=Zc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hu=Zc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),pu=Gc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yu=Gc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),bu=Gc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gu=Gc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),wu=Zc({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mu=Zc({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xu=Zc({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Eu=Zc({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),vu=Zc({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Au=Wc({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>function(e){return(new TextEncoder).encode(e)}(e)}),Bu=new TextEncoder,Su=new TextDecoder,ku="json",Uu=512;function Cu(e){return Bu.encode(JSON.stringify(e))}function Ru(e){return JSON.parse(Su.decode(e))}const Tu="raw",Iu=85;function Lu(e){return qc(e)}function Ou(e){return qc(e)}var Pu=function e(t,r,n){r=r||[];var o=n=n||0;for(;t>=Nu;)r[n++]=255&t|_u,t/=128;for(;t&ju;)r[n++]=255&t|_u,t>>>=7;return r[n]=0|t,e.bytes=n-o+1,r},_u=128,ju=-128,Nu=Math.pow(2,31);var $u=function e(t,r){var n,o=0,i=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],o+=i<28?(n&qu)<<i:(n&qu)*Math.pow(2,i),i+=7}while(n>=Hu);return e.bytes=s-r,o},Hu=128,qu=127;var Du=Math.pow(2,7),Mu=Math.pow(2,14),Fu=Math.pow(2,21),Ku=Math.pow(2,28),zu=Math.pow(2,35),Vu=Math.pow(2,42),Ju=Math.pow(2,49),Wu=Math.pow(2,56),Gu=Math.pow(2,63),Zu={encode:Pu,decode:$u,encodingLength:function(e){return e<Du?1:e<Mu?2:e<Fu?3:e<Ku?4:e<zu?5:e<Vu?6:e<Ju?7:e<Wu?8:e<Gu?9:10}};const Yu=Zu;function Xu(e,t,r=0){return Yu.encode(e,t,r),t}function Qu(e){return Yu.encodingLength(e)}function ef(e,t){const r=t.byteLength,n=Qu(e),o=n+Qu(r),i=new Uint8Array(o+r);return Xu(e,i,0),Xu(r,i,n),i.set(t,o),new tf(e,r,t,i)}class tf{code;size;digest;bytes;constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const rf=qc;const nf={code:0,name:"identity",encode:rf,digest:function(e){return ef(0,rf(e))}};function of({name:e,code:t,encode:r}){return new sf(e,t,r)}class sf{name;code;encode;constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ef(this.code,t):t.then((e=>ef(this.code,e)))}throw Error("Unknown type, must be binary type")}}function af(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const cf=of({name:"sha2-256",code:18,encode:af("SHA-256")}),uf=of({name:"sha2-512",code:19,encode:af("SHA-512")});new WeakMap;Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const ff={...U,...x,...k,...w,...m,...v,...A,...B,...S,...E};function lf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const df=lf("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),hf=lf("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Hc((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),pf={utf8:df,"utf-8":df,hex:ff.base16,latin1:hf,ascii:hf,binary:hf,...ff};function yf(e,t="utf8"){const r=pf[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var bf=r(5823);const gf=new Uint8Array(bf.encode(4608));function wf(e){return async function(t){const r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},e,"string"==typeof t?function(e,t="utf8"){const r=pf[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}(t):t);return yf(new Uint8Array(r),"base64url")}}async function mf(e){const t=await globalThis.crypto.subtle.exportKey("raw",e.publicKey);return function(e,t){const r=new Uint8Array(e.length+1);return r[0]=2+(1&t[t.length-1]),r.set(e,1),r}(new Uint8Array(t.slice(1,33)),new Uint8Array(t.slice(33,65)))}function xf(e){const t=function(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=Hc(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}([gf,e]);return`did:key:z${yf(t,"base58btc")}`}const Ef="keys",vf="default";class Af{static#e;static open(){return null!=Af.#e||(Af.#e=new Promise(((e,t)=>{if(void 0===globalThis.crypto.subtle)return t(new Error("Unable to open KeyStore: SubtleCrypto is not available"));if(void 0===globalThis.indexedDB)return t(new Error("Unable to open KeyStore: IndexedDB is not available"));const r=indexedDB.open("tairu.key-store",1);r.onerror=()=>t(r.error),r.onsuccess=()=>e(new Af(r.result)),r.onupgradeneeded=e=>{e.target.result.createObjectStore(Ef)}}))),Af.#e}static async getKeyPair(){const e=await Af.open();return await e.get()}#t;constructor(e){this.#t=e}#r(e="readonly"){return this.#t.transaction(Ef,e).objectStore(Ef)}#n(){return new Promise(((e,t)=>{const r=this.#r().get(vf);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result)}))}#o(e){return new Promise(((t,r)=>{const n=this.#r("readwrite").put(e,vf);n.onerror=()=>r(n.error),n.onsuccess=()=>t()}))}async#i(){const e=await async function(){return await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])}();return await this.#o(e),e}async get(){return await this.#n()??await this.#i()}async reset(){return await this.#i()}}class Bf{static#e;static async fromKeyPair(e){const t=await async function(e){return xf(await mf(e))}(e);return new Bf(t,e.privateKey)}static get(){return null==Bf.#e&&(Bf.#e=Af.getKeyPair().then(Bf.fromKeyPair)),Bf.#e}static async createToken(e,t){const r=await Bf.get();return await r.createToken(e,t)}#s;#t;constructor(e,t){this.#s=e,this.#t=wf(t)}get id(){return this.#s}async createToken(e,t={}){const{header:r,...n}=t;return await _c(e,{...n,issuer:this.#s,signer:this.#t},{...r??{},alg:"ES256"})}}function Sf(e){return(0,L.jsxs)("div",{children:["Error: ",e.error.message]})}function kf(e){const t=function(){const[e,t]=(0,Ye.useState)(Promise.resolve(We));return(0,Ye.useEffect)((()=>{t(Bf.get())}),[]),e}();return(0,L.jsx)(ir,{handleOpenURI:sr,renderLoadError:e.renderLoadError??Sf,renderPostError:e.renderPostError,renderer:e.renderer??wr,signer:t,url:e.url})}}}]);